import{T as N}from"./TextBox-7a965e88.js";import{_ as S,r as o,o as T,y as A,B as P,C as j,c as h,a as l,b as _,z,f as v,g as x}from"./index-4f0251ba.js";import{B as H}from"./ButtonLink-43715362.js";import{C as V}from"./category-855ddfae.js";import{P as L}from"./PagesNavigationHeader-c8c7004e.js";import{E as M}from"./extension-6b58ca39.js";import{T as R}from"./type-e63f604b.js";import{S as U}from"./SuccessComponent-d31b415f.js";import"./ArrowLeftIcon-5af96ac5.js";import"./XMarkIcon-ae1ed58b.js";const q={setup(){const m=o({}),i=o(""),d=o(""),t=o(0),p=o(0),f=o(""),c=o(""),r=o(!1),u=o([]),g=o([]),C=o([]),y=o([]),k=async e=>{if(e.target.name==="category"&&e.target.value.length>2){d.value=e.target.value;const a=u.value.filter(n=>n.name==e.target.value);a[0]&&(t.value=a[0].id,b(a[0].id))}else if(e.target.name==="extension"){c.value=e.target.value;const a=g.value.filter(n=>n.ext_name===e.target.value);a[0]&&(p.value=a[0].ext_id)}else e.target.name=="name"&&(i.value=e.target.value)},E=async()=>{const e=await R.update({name:i.value,category:t.value,extension:p.value,id:f.value});e.type==="error"?m.value=e.data:e.type==="success"&&(m.value={},r.value=!0)},I=async()=>{const e=await V.getAll(),a=Array.isArray(e.data)?e.data:[e.data];a.forEach(n=>{C.value.push({key:n.id,value:n.name})}),u.value=a},b=async e=>{const a=await M.getAllByCategory(e),n=[];if(a.type==="success"){let B=Array.isArray(a.data)?a.data:[a.data];B.forEach(w=>{n.push({key:w.ext_id,value:w.ext_name})}),y.value=n,g.value=B}},s=z();return T(()=>{s.params&&(i.value=A(s.params.name,!0),f.value=s.params.id),I().then(()=>{t.value=s.params.category,p.value=s.params.extension,d.value=u.value.filter(e=>e.id==s.params.category)[0].name,b(s.params.category).then(()=>{c.value=y.value.filter(e=>e.key==s.params.extension)[0].value})})}),{name:i,errors:m,handleInput:k,category:d,extension:c,transpiledCat:C,transpiledExt:y,promptSuccessBox:r,onPressCreate:E}},components:{ButtonLink:H,Button:P,TextBox:N,CheckCircleIcon:j,PagesNavigationHeader:L,SuccessComponent:U}},D={class:"w-full md:h-[90%] flex justify-center items-center"},F={key:0,class:"md:w-5/12 border w-11/12 md:mb-5 mb-3 mt-10 bg-white __shad shadow-gray-200 flex h-auto rounded p-8 justify-center flex-col"},G=_("p",{class:"text-gray-600 mb-3 text-sm"},"Remplissez le champ ci-bas pour enregister un nouveau type.",-1),J={class:"h-full w-full flex flex-col"},K={class:"w-full flex mt-3 justify-between"},O={key:1,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"};function Q(m,i,d,t,p,f){const c=v("PagesNavigationHeader"),r=v("TextBox"),u=v("Button"),g=v("SuccessComponent");return x(),h("div",D,[t.promptSuccessBox?(x(),h("div",O,[l(g,{path:"/admin/types",title:"Enregitrement effectué !",message:"Le type a été enregistrée avec succès. Il est maintenant utilisable partout. Vous pouvez le modifier mais pas le supprimer définitivément."})])):(x(),h("div",F,[l(c,{title:"Modification d'un type"}),G,_("form",J,[l(r,{onChange:t.handleInput,type:"text",name:"name",label:"Nom du type",value:t.name,placeholder:"Nom du type",err:t.errors.name},null,8,["onChange","value","err"]),l(r,{list:"category",items:t.transpiledCat,onChange:t.handleInput,type:"text",name:"category",label:"Choisir la catégorie",value:t.category,placeholder:"Choisir la catégorie",err:t.errors.category},null,8,["items","onChange","value","err"]),l(r,{list:"extension",items:t.transpiledExt,onChange:t.handleInput,type:"text",name:"extension",label:"Choisir l'extension",value:t.extension,placeholder:"Choisir la catégorie",err:t.errors.category},null,8,["items","onChange","value","err"])]),_("div",K,[l(u,{text:"Enregistrer",variant:"bg",design:"primary",onClick:t.onPressCreate},null,8,["onClick"])])]))])}const se=S(q,[["render",Q]]);export{se as default};
