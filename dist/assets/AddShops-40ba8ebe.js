import{T as B}from"./TextBox-7a965e88.js";import{_ as k,B as I,C as j,c as r,b as e,a as n,t as u,w as y,q as g,H as p,F as S,i as A,d as i,f as c,g as a}from"./index-4f0251ba.js";import{B as L}from"./ButtonLink-43715362.js";import{S as P}from"./shop-37c8544f.js";import{C as T}from"./category-855ddfae.js";import{r as V}from"./PhotoIcon-a21ae8ef.js";import{r as N}from"./PlusCircleIcon-776f3ae5.js";import{P as E}from"./PagesNavigationHeader-c8c7004e.js";import{u as G}from"./logout-e8b700e1.js";import{L as R}from"./location-bd5000e1.js";import{u as z}from"./use-transpiler-49b8a80b.js";import{G as M}from"./GoBackAdminButton-a12efcb1.js";import"./ArrowLeftIcon-5af96ac5.js";const F={components:{ButtonLink:L,Button:I,TextBox:B,CheckCircleIcon:j,PagesNavigationHeader:E,PhotoIcon:V,PlusCircleIcon:N,GoBackAdminButton:M},data(){return{address:"",errors:{},image:"",contact:"",whatsApp:"",town:"",locationId:"",category:"",currentCat:"",fileImage:"",name:"",location:[],transpiledLocations:[],currentButton:"Basic",promptSuccessBox:!1,locations:[],transpiledCat:[],chosenCat:[],datalistCat:"",datalistCatId:""}},mounted(){this.getLocation(),this.getCategories()},methods:{async handleChange(o){if(this[o.target.name]=o.target.value,o.target.name==="town"){const s=this.locations.filter(f=>f.name===o.target.value);s[0]?(this.locationId=s[0].id,this.town=s[0].name,this.errors.town=void 0):this.errors.town="Ville choisie invalide !"}if(o.target.name==="category"){const s=this.categories.filter(f=>f.name==o.target.value)[0];s&&(this.currentCat=s)}},async onPressRegister(){const o=this.datalistCat+"#"+this.datalistCatId,s=await P.create({name:this.name,categories:o,town:this.locationId,location:this.town,image:this.fileImage,contact:this.contact,level:this.currentButton,whatsApp:this.whatsApp,address:this.address});s.type==="error"?this.errors=s.data:s.type=="success"?(this.errors={},this.promptSuccessBox=!0):s.type=="auth"&&(localStorage.removeItem("admin"),this.$router.push("/admin/login"))},chooseShopType(o){this.currentButton=o},fireChoseMethod(){const o=this.chosenCat.filter(s=>s.name==this.currentCat.name);Array.isArray(o)&&o.length>0?this.errors.category="Catégorie déjà choisie":((this.currentButton==="Basic"&&this.chosenCat.length+1<=1||this.currentButton==="Standard"&&this.chosenCat.length+1<4||this.currentButton==="Business"&&this.chosenCat.length+1<11)&&(this.chosenCat.push(this.currentCat),this.datalistCat===""&&this.datalistCatId==""?(this.datalistCat=this.currentCat.name,this.datalistCatId=this.currentCat.id):(this.datalistCat=this.datalistCat+"$"+this.currentCat.name,this.datalistCatId=this.datalistCatId+"$"+this.currentCat.id)),this.errors.category=void 0),this.category=""},async loadImage(o){this.image=URL.createObjectURL(o.target.files[0]),this.fileImage=o.target.files[0]},handleLoadImage(){this.$refs.input.click()},async getLocation(){const o=await R.getAll();G(o).then(s=>s==="success"?this.$router.push("/admin/login"):null),o.type==="success"&&(this.locations=o.data),this.transpiledLocations=z(o,{key:"id".id,value:"name"})},async getCategories(){const o=await T.getAll();o.data.forEach(s=>{this.transpiledCat.push({key:s.id,value:s.name})}),this.categories=o.data}}},H={class:"w-11/12 mx-auto flex justify-center items-center md:h-[750px]"},U={key:0,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-8/12 w-full overflow-hidden __shad flex md:flex-row flex-col justify-between items-center h-96 md:h-[60%] rounded-lg border"},W={class:"md:w-6/12 w-full h-[50%] flex md:h-full bg-green-500 md:p-8 p-6 justify-center items-center flex-col"},q=e("h1",{class:"font-semibold text-2xl text-white mt-3"},"Création éffectuée.",-1),D={class:"md:w-6/12 w-full h-[50%] flex items-center flex-col justify-center md:h-full"},O={class:"text-gray-800 text-center md:w-11/12 w-10/12"},J=i("La création du shop "),K=i(" a été éffectuée avec succès. Vous pouvez maintenant ajouter des produits dans ce shop, ajouter des succursales,etc..."),Q={class:"bg-green-500 shadow-green-300 shadow-lg px-2 py-1.5 mt-5 hover:bg-green-600 rounded text-white text-lg"},X=i("Continuer"),Y={key:1,"data-aos":"slide-up","data-aos-duration":"500",class:"lg:w-10/12 w-full bg-white __shad flex justify-between items-center border h-[92%] rounded-lg"},Z={class:"md:w-10/12 lg:w-7/12 flex md:h-[80%] md:p-6 p-4 w-full justify-center flex-col"},$={class:"flex items-center"},ee=i(),te=e("span",{class:"ml-1 mr-1"},"|",-1),se=i(),oe=e("h1",{class:"font-semibold text-2xl text-gray-700"},"Créer un nouveau shop",-1),ne={class:"h-full w-full flex flex-col"},re={class:"md:w-5/12 my-3 w-full md:hidden flex flex-col items-center justify-center h-full"},ae={class:"h-60 md:w-60 w-full relative flex justify-center items-center rounded border"},le={key:0,class:"flex justify-center flex-col items-center"},ie=e("span",null,"Ajouter un logo pour votre shop",-1),ce={class:"text-red-500 mt-1 text-sm"},de={key:1,class:"w-full h-full p-2"},he=["src"],ue={class:"absolute -bottom-5 h-10 w-10"},me={key:0,class:"text-red-500 mt-2 text-sm"},fe={class:"md:w-9/12"},pe={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},ge={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},_e={class:"md:w-11/12 w-full h-auto"},xe=i(" Type de shop "),we={class:"w-11/12 md:w-full mx-auto h-16 mb-2 p-1 flex items-center justify-evenly rounded"},ye={key:0,class:"flex"},Ce=i("Basic "),ve={key:1,class:"flex"},be={key:0,class:"flex"},Be=i("Standard "),ke={key:1,class:"flex"},Ie={key:0,class:"flex"},je=i("Business "),Se={key:1,class:"flex"},Ae={key:0,class:"flex"},Le=i("Premium "),Pe={key:1,class:"flex"},Te={key:0,class:"w-full h-auto"},Ve={class:"w-full h-40"},Ne={class:"flex justify-between w-full"},Ee={class:"flex overflow-auto p-1 flex-wrap h-24 rounded w-full border"},Ge={class:"rounded-full ml-1 mb-1 w-fit p-1 bg-gray-200 h-fit text-xs text-gray-600 border"},Re={class:"text-sm mt-4"},ze=i("En créant un shop, vous acceptez "),Me=e("span",{class:"text-blue-700"},"les Conditions générales de vendeur",-1),Fe=i(" sur muyiSphere."),He={class:"w-full items-center mt-2 flex justify-between"},Ue={class:"w-5/12 md:flex hidden flex-col items-center justify-center h-full"},We={class:"h-60 w-60 relative flex justify-center items-center rounded border"},qe={key:0,class:"flex justify-center flex-col items-center"},De=e("span",null,"Ajouter une photo",-1),Oe={class:"text-red-500 mt-1 text-sm"},Je={key:1,class:"w-full h-full p-2"},Ke=["src"],Qe={class:"absolute -bottom-5 h-10 w-10"},Xe={key:0,class:"text-red-500 mt-2 text-sm"};function Ye(o,s,f,Ze,t,l){const d=c("CheckCircleIcon"),_=c("router-link"),C=c("GoBackAdminButton"),x=c("PhotoIcon"),w=c("PlusCircleIcon"),h=c("TextBox"),v=c("ButtonLink"),b=c("Button");return a(),r("div",H,[t.promptSuccessBox?(a(),r("div",U,[e("div",W,[n(d,{class:"w-20 h-20 text-white"}),q]),e("div",D,[e("span",O,[J,e("b",null,u(t.name),1),K]),e("span",Q,[n(_,{to:"/admin/shops"},{default:y(()=>[X]),_:1})])])])):(a(),r("div",Y,[e("div",Z,[e("div",$,[n(C),ee,te,se,oe]),e("form",ne,[e("div",re,[e("div",ae,[t.image?(a(),r("div",de,[e("img",{src:t.image,class:"h-full w-full object-cover",alt:"Company logo"},null,8,he)])):(a(),r("div",le,[n(x,{class:"h-16 cursor-pointer w-16 text-gray-500"}),ie,e("span",ce,u(t.errors.image),1)])),e("div",ue,[n(w,{onClick:l.handleLoadImage,class:"h-8 hover:text-gray-400 w-8 text-gray-500"},null,8,["onClick"])])]),t.image?(a(),r("span",me,u(t.errors.image),1)):g("",!0)]),e("div",fe,[n(h,{onChange:l.handleChange,label:"Nom du shop",type:"text",name:"name",placeholder:"Le nom de votre shop",value:t.name,err:t.errors.name},null,8,["onChange","value","err"])]),e("div",pe,[n(h,{onChange:l.handleChange,label:"Contact",type:"text",name:"contact",placeholder:"Votre contact",value:t.contact,err:t.errors.contact},null,8,["onChange","value","err"]),n(h,{onChange:l.handleChange,label:"WhatsApp",type:"text",name:"whatsApp",placeholder:"Votre WhatsApp",value:t.whatsApp,err:t.errors.whatsapp},null,8,["onChange","value","err"])]),e("div",ge,[n(h,{onChange:l.handleChange,items:t.transpiledLocations,list:"location",label:"Ville",type:"text",name:"town",placeholder:"Votre ville",value:t.town,err:t.errors.town},null,8,["onChange","items","value","err"]),n(h,{onChange:l.handleChange,label:"Addresse précise",type:"text",name:"address",placeholder:"Votre Addresse Exacte",value:t.address,err:t.errors.address},null,8,["onChange","value","err"])]),e("div",_e,[xe,e("div",we,[e("button",{type:"button",onClick:s[0]||(s[0]=()=>l.chooseShopType("Basic")),class:p(`p-1 h-fit hover:shadow-lg hover:shadow-green-300 border-2 border-green-500 font-semibold rounded ${t.currentButton==="Basic"?"bg-green-500 text-white":"text-green-500 bg-white"}`)},[t.currentButton==="Basic"?(a(),r("span",ye,[Ce,n(d,{class:"h-6 w-6 ml-1"})])):(a(),r("span",ve,"Basic"))],2),e("button",{type:"button",onClick:s[1]||(s[1]=()=>l.chooseShopType("Standard")),class:p(`p-1 h-fit hover:shadow-lg hover:shadow-blue-300 border-2 border-blue-700 font-semibold rounded transition-colors duration-500 ${t.currentButton==="Standard"?"bg-blue-700 text-white":"text-blue-700 bg-white"}`)},[t.currentButton==="Standard"?(a(),r("span",be,[Be,n(d,{class:"h-6 w-6 ml-1"})])):(a(),r("span",ke,"Standard"))],2),e("button",{type:"button",onClick:s[2]||(s[2]=()=>l.chooseShopType("Business")),class:p(`p-1 h-fit hover:shadow-lg hover:shadow-orange-300 border-2 border-orange-500 font-semibold rounded transition-colors duration-500 ${t.currentButton==="Business"?"bg-orange-500 text-white":"text-orange-500 bg-white"}`)},[t.currentButton==="Business"?(a(),r("span",Ie,[je,n(d,{class:"h-6 w-6 ml-1"})])):(a(),r("span",Se,"Business"))],2),e("button",{type:"button",onClick:s[3]||(s[3]=()=>l.chooseShopType("Premium")),class:p(`p-1 h-fit hover:shadow-lg hover:shadow-gray-300 border-2 border-gray-500 font-semibold rounded transition-colors duration-500 ${t.currentButton==="Premium"?"bg-gray-500 text-white":"text-gray-500 bg-white"}`)},[t.currentButton==="Premium"?(a(),r("span",Ae,[Le,n(d,{class:"h-6 w-6 ml-1"})])):(a(),r("span",Pe,"Premium"))],2)]),e("input",{hidden:"",ref:"input",type:"file",name:"file",onChange:s[4]||(s[4]=(...m)=>l.loadImage&&l.loadImage(...m))},null,544)]),t.currentButton==="Basic"||t.currentButton==="Standard"||t.currentButton==="Business"?(a(),r("div",Te,[e("div",Ve,[e("div",Ne,[n(h,{list:"category",items:t.transpiledCat,onChange:l.handleChange,type:"text",name:"category",label:"Choisir les catégories",value:t.category,placeholder:"Choisir la catégorie",err:t.errors.category},null,8,["items","onChange","value","err"]),e("span",{onClick:s[5]||(s[5]=(...m)=>l.fireChoseMethod&&l.fireChoseMethod(...m)),class:"w-10 h-10 cursor-pointer bg-blue-600 text-white grid place-items-center rounded border mt-[33px] ml-1"},[n(d,{class:"w-8 h-8"})])]),e("div",Ee,[(a(!0),r(S,null,A(t.chosenCat,m=>(a(),r("span",Ge,u(m.name),1))),256))])])])):g("",!0)]),e("p",Re,[ze,n(_,{to:"/term-of-use"},{default:y(()=>[Me]),_:1}),Fe]),e("div",He,[n(v,{text:"Voir les shops",path:"/admin/shops",variant:"default"}),n(b,{text:"Enregistrer",variant:"bg",design:"primary",onClick:l.onPressRegister},null,8,["onClick"])])]),e("div",Ue,[e("div",We,[t.image?(a(),r("div",Je,[e("img",{src:t.image,class:"h-full w-full object-cover",alt:"Company logo"},null,8,Ke)])):(a(),r("div",qe,[n(x,{class:"h-16 cursor-pointer w-16 text-gray-500"}),De,e("span",Oe,u(t.errors.image),1)])),e("div",Qe,[n(w,{onClick:l.handleLoadImage,class:"h-8 hover:text-gray-400 w-8 text-gray-500"},null,8,["onClick"])])]),t.image?(a(),r("span",Xe,u(t.errors.image),1)):g("",!0)])]))])}const ut=k(F,[["render",Ye]]);export{ut as default};
