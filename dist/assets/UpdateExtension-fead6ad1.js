import{T as b}from"./TextBox-7a965e88.js";import{_ as w,r as a,o as B,B as k,C as E,c as g,a as l,b as h,z as I,f as d,g as v}from"./index-4f0251ba.js";import{B as N}from"./ButtonLink-43715362.js";import{C as P}from"./category-855ddfae.js";import{P as S}from"./PagesNavigationHeader-c8c7004e.js";import{E as j}from"./extension-6b58ca39.js";import{S as T}from"./SuccessComponent-d31b415f.js";import"./ArrowLeftIcon-5af96ac5.js";import"./XMarkIcon-ae1ed58b.js";const z={setup(){const c=a(""),o=a(""),p=a(""),t=a(!1),m=a([]),x=a(""),u=a(""),n=a([]),s=a(void 0);async function f(e){if(e.target.name==="title"&&(o.value=e.target.value),e.target.name==="category"&&e.target.value.length>2){const i=m.value.filter(C=>C.name==e.target.value);i[0]&&(s.value=i[0].id)}}const _=async()=>{const e=await P.getAll();e.data.forEach(i=>{n.value.push({key:i.id,value:i.name})}),m.value=e.data},y=async()=>{const e=await j.update({title:o.value,extensionId:u.value,category:s.value});e.type==="error"?c.value=e.data:(c.value={},t.value=!0)},r=I();return B(()=>{r.params&&_().then(()=>{s.value=r.params.category,u.value=r.params.id,p.value=m.value.filter(e=>e.id==r.params.category)[0].name,o.value=r.params.name.replace(/(\-)/gi," ")})}),{errors:c,title:o,transpiledCat:n,promptSuccessBox:t,onPressCreate:y,handleInput:f,extension:x,category:p}},components:{ButtonLink:N,Button:k,TextBox:b,CheckCircleIcon:E,PagesNavigationHeader:S,SuccessComponent:T}},H={class:"w-full md:h-[90%] flex justify-center items-center"},V={key:0,class:"md:w-5/12 border w-11/12 md:mb-5 mb-3 mt-10 bg-white __shad shadow-gray-200 flex h-auto rounded p-8 justify-center flex-col"},L=h("p",{class:"text-gray-600 mb-3 text-sm"},"Remplissez le champ ci-bas pour modifier une extension.",-1),M={class:"h-full w-full flex flex-col"},R={class:"w-full flex mt-3 justify-between"},A={key:1,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"};function U(c,o,p,t,m,x){const u=d("PagesNavigationHeader"),n=d("TextBox"),s=d("Button"),f=d("SuccessComponent");return v(),g("div",H,[t.promptSuccessBox?(v(),g("div",A,[l(f,{path:"/admin/extensions",title:"Enregitrement effectué !",message:"La sous catégorie a été enregistrée avec succès. Elle est maintenant utilisable partout. Vous pouvez la modifier mais pas la supprimer définitivément."})])):(v(),g("div",V,[l(u,{title:"Modification  d'une extension"}),L,h("form",M,[l(n,{onChange:t.handleInput,type:"text",name:"title",label:"Nom de l'extension",value:t.title,placeholder:"Nom de la sous catégorie",err:t.errors.title},null,8,["onChange","value","err"]),l(n,{list:"category",items:t.transpiledCat,onChange:t.handleInput,type:"text",name:"category",label:"Choisir la catégorie",value:t.category,placeholder:"Choisir la catégorie",err:t.errors.category},null,8,["items","onChange","value","err"])]),h("div",R,[l(s,{text:"Enregistrer",variant:"bg",design:"primary",onClick:t.onPressCreate},null,8,["onClick"])])]))])}const X=w(z,[["render",U]]);export{X as default};
