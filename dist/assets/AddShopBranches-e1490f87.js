import{T as b}from"./TextBox-7a965e88.js";import{_ as B,B as k,C as I,c as r,b as e,a as n,t as h,w as g,q as x,d as c,f as l,g as i}from"./index-4f0251ba.js";import{B as j}from"./ButtonLink-43715362.js";import{S as A}from"./shop-37c8544f.js";import{B as L}from"./branch-689a9ce0.js";import{C as S}from"./category-855ddfae.js";import{r as V}from"./PhotoIcon-a21ae8ef.js";import{r as P}from"./PlusCircleIcon-776f3ae5.js";import{P as T}from"./PagesNavigationHeader-c8c7004e.js";import{u as N}from"./logout-e8b700e1.js";import{L as G}from"./location-bd5000e1.js";import{u as E}from"./use-transpiler-49b8a80b.js";import{G as R}from"./GoBackAdminButton-a12efcb1.js";import"./ArrowLeftIcon-5af96ac5.js";const U={components:{ButtonLink:j,Button:k,TextBox:b,CheckCircleIcon:I,PagesNavigationHeader:T,PhotoIcon:V,PlusCircleIcon:P,GoBackAdminButton:R},data(){return{address:"",errors:{},image:"",contact:"",whatsApp:"",town:"",locationId:"",category:"",currentCat:"",fileImage:"",name:"",location:[],transpiledLocations:[],currentButton:"Basic",promptSuccessBox:!1,locations:[],transpiledCat:[],chosenCat:[],datalistCat:"",datalistCatId:"",shop:{}}},mounted(){this.getShop(),this.getLocation(),this.getCategories()},methods:{async handleChange(t){if(this[t.target.name]=t.target.value,t.target.name==="town"){const o=this.locations.filter(u=>u.name===t.target.value);o[0]?(this.locationId=o[0].id,this.errors.town=void 0):this.errors.town="Ville choisie invalide !"}if(t.target.name==="category"){const o=this.categories.filter(u=>u.name==t.target.value)[0];o&&(this.currentCat=o)}},async onPressRegister(){const t=await L.create({name:this.name,town:this.locationId,location:this.town,image:this.fileImage,owner:this.shop.owner_id,shop_id:this.shop.id,contact:this.contact,whatsApp:this.whatsApp,address:this.address});t.type==="error"?this.errors=t.data:t.type=="success"?(this.errors={},this.promptSuccessBox=!0):t.type=="auth"&&(localStorage.removeItem("admin"),this.$router.push("/admin/login"))},chooseShopType(t){this.currentButton=t},fireChoseMethod(){const t=this.chosenCat.filter(o=>o.name==this.currentCat.name);Array.isArray(t)&&t.length>0?this.errors.category="Catégorie déjà choisie":((this.currentButton==="Basic"&&this.chooseShopType.length===1||this.currentButton==="Standard"&&this.chosenCat.length+1<4||this.currentButton==="Business"&&this.chosenCat.length+1<11)&&(this.chosenCat.push(this.currentCat),this.datalistCat===""&&this.datalistCatId==""?(this.datalistCat=this.currentCat.name,this.datalistCatId=this.currentCat.id):(this.datalistCat=this.datalistCat+"$"+this.currentCat.name,this.datalistCatId=this.datalistCatId+"$"+this.currentCat.id)),this.errors.category=void 0),this.category=""},async loadImage(t){this.image=URL.createObjectURL(t.target.files[0]),this.fileImage=t.target.files[0]},handleLoadImage(){this.$refs.input.click()},async getLocation(){const t=await G.getAll();N(t).then(o=>o==="success"?this.$router.push("/admin/login"):null),t.type==="success"&&(this.locations=t.data),this.transpiledLocations=E(t,{key:"id".id,value:"name"})},async getCategories(){const t=await S.getAll();t.data.forEach(o=>{this.transpiledCat.push({key:o.id,value:o.name})}),this.categories=t.data},async getShop(){const t=await A.get(this.$route.params.id);t.type==="success"&&(this.shop=t.data)}}},W={class:"w-11/12 mx-auto flex justify-center items-center md:h-[600px]"},q={key:0,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-8/12 w-full overflow-hidden __shad flex md:flex-row flex-col justify-between items-center h-96 md:h-[60%] rounded-lg border"},z={class:"md:w-6/12 w-full h-[50%] flex md:h-full bg-green-500 md:p-8 p-6 justify-center items-center flex-col"},D=e("h1",{class:"font-semibold text-2xl text-white mt-3"},"Création éffectuée.",-1),H={class:"md:w-6/12 w-full h-[50%] flex items-center flex-col justify-center md:h-full"},M={class:"text-gray-800 text-center md:w-11/12 w-10/12"},O=c("La création du de la branche "),F=c(" a été éffectuée avec succès. Vous pouvez maintenant ajouter y mettre des produits, etc..."),J={class:"bg-green-500 shadow-green-300 shadow-lg px-2 py-1.5 mt-5 hover:bg-green-600 rounded text-white text-lg"},K=c("Continuer"),Q={key:1,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-10/12 w-full bg-white __shad flex justify-between items-center border h-[92%] rounded-lg"},X={class:"md:w-7/12 flex h-[80%] md:p-6 p-4 justify-center flex-col"},Y={class:"flex items-center"},Z=c(),$=e("span",{class:"ml-1 mr-1"},"|",-1),ee=c(),te={class:"text-gray-700"},se=c("Créer une branche pour "),oe={class:"h-full w-full flex flex-col"},ne={class:"md:w-5/12 my-3 w-full flex md:hidden flex-col items-center justify-center h-full"},ae={class:"h-60 md:w-60 w-full relative flex justify-center items-center rounded border"},re={key:0,class:"flex justify-center flex-col items-center"},ie=e("span",null,"Ajouter un logo pour votre branche",-1),le={class:"text-red-500 mt-1 text-sm"},ce={key:1,class:"w-full h-full p-2"},he=["src"],de={class:"absolute cursor-pointer -bottom-5 h-10 w-10"},ue={key:0,class:"text-red-500 mt-2 text-sm"},me={class:"md:w-9/12"},pe={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},fe={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},_e={class:"text-sm mt-4"},ge=c("En créant une branche, le propriétaire accepte "),xe=e("span",{class:"text-blue-700"},"les Conditions générales de vendeur",-1),Ce=c(" sur muyiSphere."),we={class:"w-full items-center mt-2 flex justify-between"},ye={class:"w-5/12 md:flex hidden flex-col items-center justify-center h-full"},ve={class:"h-60 w-60 relative flex justify-center items-center rounded border"},be={key:0,class:"flex justify-center flex-col items-center"},Be=e("span",null,"Ajouter une photo",-1),ke={class:"text-red-500 mt-1 text-sm"},Ie={key:1,class:"w-full h-full p-2"},je=["src"],Ae={class:"absolute cursor-pointer -bottom-5 h-10 w-10"},Le={key:0,class:"text-red-500 mt-2 text-sm"};function Se(t,o,u,Ve,s,a){const C=l("CheckCircleIcon"),p=l("router-link"),w=l("GoBackAdminButton"),f=l("PhotoIcon"),_=l("PlusCircleIcon"),d=l("TextBox"),y=l("ButtonLink"),v=l("Button");return i(),r("div",W,[s.promptSuccessBox?(i(),r("div",q,[e("div",z,[n(C,{class:"w-20 h-20 text-white"}),D]),e("div",H,[e("span",M,[O,e("b",null,h(s.name),1),F]),e("span",J,[n(p,{to:"/admin/shops/"+s.shop.id+"/branches"},{default:g(()=>[K]),_:1},8,["to"])])])])):(i(),r("div",Q,[e("div",X,[e("div",Y,[n(w),Z,$,ee,e("h1",te,[se,e("b",null,h(s.shop.name),1)])]),e("form",oe,[e("div",ne,[e("div",ae,[s.image?(i(),r("div",ce,[e("img",{src:s.image,class:"h-full w-full object-cover",alt:"Company logo"},null,8,he)])):(i(),r("div",re,[e("input",{hidden:"",ref:"input",type:"file",name:"file",onChange:o[0]||(o[0]=(...m)=>a.loadImage&&a.loadImage(...m))},null,544),n(f,{class:"h-16 cursor-pointer w-16 text-gray-500"}),ie,e("span",le,h(s.errors.image),1)])),e("div",de,[n(_,{onClick:a.handleLoadImage,class:"h-8 hover:text-gray-400 w-8 text-gray-500"},null,8,["onClick"])])]),s.image?(i(),r("span",ue,h(s.errors.image),1)):x("",!0)]),e("div",me,[n(d,{onChange:a.handleChange,label:"Nom du shop",type:"text",name:"name",placeholder:"Le nom de votre shop",value:s.name,err:s.errors.name},null,8,["onChange","value","err"])]),e("div",pe,[n(d,{onChange:a.handleChange,label:"Contact",type:"text",name:"contact",placeholder:"Votre contact",value:s.contact,err:s.errors.contact},null,8,["onChange","value","err"]),n(d,{onChange:a.handleChange,label:"WhatsApp",type:"text",name:"whatsApp",placeholder:"Votre WhatsApp",value:s.whatsApp,err:s.errors.whatsapp},null,8,["onChange","value","err"])]),e("div",fe,[n(d,{onChange:a.handleChange,items:s.transpiledLocations,list:"location",label:"Ville",type:"text",name:"town",placeholder:"Votre ville",value:s.town,err:s.errors.town},null,8,["onChange","items","value","err"]),n(d,{onChange:a.handleChange,label:"Addresse précise",type:"text",name:"address",placeholder:"Votre Addresse Exacte",value:s.address,err:s.errors.address},null,8,["onChange","value","err"])])]),e("p",_e,[ge,n(p,{to:"/term-of-use"},{default:g(()=>[xe]),_:1}),Ce]),e("div",we,[n(y,{text:"Voir les branches de ce shop",path:"/admin/shops/"+s.shop.id+"/branches",variant:"default"},null,8,["path"]),n(v,{text:"Créer cette branche",variant:"bg",design:"primary",onClick:a.onPressRegister},null,8,["onClick"])])]),e("div",ye,[e("div",ve,[s.image?(i(),r("div",Ie,[e("img",{src:s.image,class:"h-full w-full object-cover",alt:"Company logo"},null,8,je)])):(i(),r("div",be,[e("input",{hidden:"",ref:"input",type:"file",name:"file",onChange:o[1]||(o[1]=(...m)=>a.loadImage&&a.loadImage(...m))},null,544),n(f,{class:"h-16 cursor-pointer w-16 text-gray-500"}),Be,e("span",ke,h(s.errors.image),1)])),e("div",Ae,[n(_,{onClick:a.handleLoadImage,class:"h-8 hover:text-gray-400 w-8 text-gray-500"},null,8,["onClick"])])]),s.image?(i(),r("span",Le,h(s.errors.image),1)):x("",!0)])]))])}const Fe=B(U,[["render",Se]]);export{Fe as default};
