import{D as B}from"./Datalist-67627a9c.js";import{r as s,o as A,c as r,a as l,b as i,F as v,i as g,w as M,g as o,d as V,t as h,u as E,a7 as N,B as S,z}from"./index-4f0251ba.js";import{P as D}from"./PagesNavigationHeader-c8c7004e.js";import{M as y}from"./mark-b9fb22e4.js";import{S as L}from"./SuccessComponent-d31b415f.js";import{C as P}from"./category-855ddfae.js";import{u as q}from"./useVerify-b9fe02ca.js";import"./ArrowLeftIcon-5af96ac5.js";import"./XMarkIcon-ae1ed58b.js";const F={class:"w-full md:h-[90%] flex justify-center items-center"},I={key:0,class:"md:w-6/12 border w-11/12 md:mb-5 mb-3 mt-10 bg-white __shad shadow-gray-200 flex h-auto rounded p-8 justify-center flex-col"},R=i("p",{class:"text-gray-600 mb-3 text-sm"},"Choisissez les categories a ajouter a cette marque.",-1),T={class:"border rounded p-2 flex flex-wrap w-full min-h-[60px]"},H={id:"wrapper",class:"px-1.5 py-0.5 relative items-center justify-between flex my-1 text-blue-500 rounded-full border-2 border-blue-500 mr-2"},G=["onClick"],J={class:"h-full w-full flex justify-between items-center space-x-2"},K=["value"],O={class:"w-full flex mt-3 justify-between"},Q={key:1,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"},re={__name:"AssignToMark",setup(U){q();const c=s({}),u=s(""),d=s(""),f=s(0),m=s([]),n=s([]),p=s(!1);async function _(e){d.value=e.target.value;const t=m.value.filter(a=>a.name==e.target.value);t[0]&&(n.value.filter(j=>j.name==t[0].name)[0]||(n.value.push(t[0]),e.target.value=""),d.value="")}async function b(){const e=await P.getAll();e.type=="success"&&(m.value=Array.isArray(e.data)?e.data:[e.data])}async function w(){const e=await y.appendCategories({name:u.value,id:f.value,data:n.value});e.type==="error"?c.value=e.data:e.type==="success"&&(c.value={},p.value=!0)}async function x(e){const t=await y.get(e);t.type==="success"&&(u.value=t.data.name,e.value=t.data.id)}function C(){const e=z();console.log(e.params),parseInt(e==null?void 0:e.params.id)&&(f.value=e.params.id,e.params.name?u.value=e.params.name:x(e.params.id))}function k(e){const t=n.value.filter(a=>a.name!=e.name);n.value=t}return A(()=>{C(),b()}),(e,t)=>(o(),r("div",F,[p.value?(o(),r("div",Q,[l(L,{path:"/admin/marks",title:"Enregitrement effectué !",message:"La marque a été enregistrée avec succès. Elle est maintenant utilisable partout. Vous pouvez la modifier mais pas le supprimer définitivément."})])):(o(),r("div",I,[l(D,{title:"Ajout  d'une categorie a "+u.value},null,8,["title"]),R,i("div",T,[(o(!0),r(v,null,g(n.value,a=>(o(),r("div",H,[V(h(a.name)+" ",1),i("span",{id:"close",onClick:()=>k(a),class:"bg-blue-200 rounded-full ml-2 cursor-pointer"},[l(E(N),{class:"w-4 h-4"})],8,G)]))),256))]),i("form",J,[l(B,{onChange:_,type:"text",name:"category",label:"Choisir la catégorie",value:d.value,placeholder:"Choisir la catégorie",err:c.value.category},{default:M(()=>[(o(!0),r(v,null,g(m.value,a=>(o(),r("option",{value:a.name,key:a.id},h(a.name),9,K))),128))]),_:1},8,["value","err"])]),i("div",O,[l(S,{text:"Enregistrer",variant:"bg",design:"primary",onClick:w})])]))]))}};export{re as default};
