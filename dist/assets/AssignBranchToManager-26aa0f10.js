import{T as b}from"./TextBox-7a965e88.js";import{_ as x,B as v,C as B,y as S,e as p,c as t,a as l,b as e,t as u,F as k,i as C,w as j,q as V,d,f as i,g as a,j as N}from"./index-4f0251ba.js";import{B as F}from"./ButtonLink-43715362.js";import{r as A}from"./FaceFrownIcon-bef8e4a9.js";import{P as I}from"./PagesNavigationHeader-c8c7004e.js";import{S as P}from"./SuccessComponent-d31b415f.js";import{u as T}from"./useVerify-b9fe02ca.js";import"./ArrowLeftIcon-5af96ac5.js";import"./XMarkIcon-ae1ed58b.js";const E={components:{ButtonLink:F,Button:v,TextBox:b,CheckCircleIcon:B,PagesNavigationHeader:I,SuccessComponent:P,FaceFrownIcon:A},mounted(){},setup(){return T(),{prettyString:S}},data(){return{errors:{},name:"",promptSuccessBox:!1,loading:!1,searchBoxValue:"",showSearchBox:!1,users:[],user:{}}},mounted(){},methods:{chooseUser(s){this.searchBoxValue=s.name,this.showSearchBox=!1,this.user=s},async handleInput(s){this[s.target.name]=s.target.value},async handleSearchBox(s){if(s.target.value.length>2){this.showSearchBox=!0;const n=await p.search(s.target.value);console.log(n),this.users=Array.isArray(n.data)?n.data:[n.data]}else this.showSearchBox=!1;this.searchBoxValue=s.target.value},async onPressAssign(){(await p.assignManagerToBranch({shop:this.$route.params.shop_id,branch:this.$route.params.branch_id,user:this.user.id})).type==="success"&&(this.promptSuccessBox=!0)}}},z={class:"w-full md:h-[90%] flex justify-center items-center"},H={key:0,class:"lg:w-6/12 md:w-8/12 border w-11/12 md:mb-5 mb-3 mt-10 bg-white __shad shadow-gray-200 flex h-auto rounded p-8 justify-center flex-col"},L={class:"flex w-full my-2 justify-between items-center"},M=e("span",{class:"font-semibold"},"Nom du shop",-1),U={class:"flex w-full my-2 justify-between items-center"},q=e("span",{class:"font-semibold"},"Nom de la branche",-1),D=e("p",{class:"text-gray-600 mb-3 text-sm"},"Choisissez le manager a assossier a cette branche",-1),G={class:"h-full w-full flex flex-col"},J={class:"relative max-h-96 mt-1 border rounded p-1 w-full"},K=["value","placeholder"],O={key:0,"data-aos-duration":"300",class:"w-full shadow z-50 absolute top-10 rounded p-2 h-60 bg-white border left-0 mt-1"},Q={key:0,class:"w-full animate-pulse"},R=N('<div class="w-full flex justify-between mt-3 h-8"><span class="w-20 h-2 rounded bg-gray-300"></span><span class="w-5 h-2 rounded bg-gray-300"></span></div><div class="w-full flex justify-between h-8"><span class="w-32 h-2 rounded bg-gray-300"></span><span class="w-5 h-2 rounded bg-gray-300"></span></div><div class="w-full flex justify-between h-8"><span class="w-14 h-2 rounded bg-gray-300"></span><span class="w-5 h-2 rounded bg-gray-300"></span></div><div class="w-full flex justify-between h-8"><span class="w-40 h-2 rounded bg-gray-300"></span><span class="w-5 h-2 rounded bg-gray-300"></span></div><div class="w-full flex justify-between h-8"><span class="w-20 h-2 rounded bg-gray-300"></span><span class="w-5 h-2 rounded bg-gray-300"></span></div>',5),W=[R],X={key:1,class:"w-full"},Y=["onClick"],Z=d(),$={key:2,class:"w-full h-full grid text-gray-600 place-items-center"},ee={class:"w-fit flex flex-col items-center h-fit"},se={class:"w-9/12 mx-auto text-center"},te=d("Aucun resultat pour ce nom d'utilisateur. Verifier l'orthographe ou "),ae=d("créer d'abord cet utilisateur"),oe=d(" ."),ne={class:"w-full flex mt-3 justify-between"},re={key:1,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"};function le(s,n,ie,h,o,c){var m;const f=i("PagesNavigationHeader"),_=i("FaceFrownIcon"),g=i("router-link"),w=i("Button"),y=i("SuccessComponent");return a(),t("div",z,[o.promptSuccessBox?(a(),t("div",re,[l(y,{path:"/admin/categories",title:"Enregitrement effectué !",message:"La catégorie a été enregistrée avec succès. Elle est maintenant utilisable partout. Vous pouvez la modifier mais pas la supprimer définitivément."})])):(a(),t("div",H,[l(f,{title:"Assigner un gerant a une branche"}),e("div",L,[M,e("span",null,u(h.prettyString(this.$route.params.shop_name,!0)),1)]),e("div",U,[q,e("span",null,u(h.prettyString(this.$route.params.branch_name,!0)),1)]),D,e("form",G,[e("div",J,[e("input",{onInput:n[0]||(n[0]=(...r)=>c.handleSearchBox&&c.handleSearchBox(...r)),value:o.searchBoxValue,class:"h-8 w-full outline-none",placeholder:`Taper le nom du shop à associer à ${h.prettyString(this.$route.params.branch_name,!0)}`},null,40,K),o.showSearchBox?(a(),t("div",O,[o.loading?(a(),t("div",Q,W)):!o.loading&&o.users.length>0?(a(),t("div",X,[(a(!0),t(k,null,C(o.users,r=>(a(),t("div",{onClick:()=>c.chooseUser(r),class:"w-full hover:bg-gray-100 cursor-pointer rounded p-1 flex justify-between",key:r.id},[e("span",null,u(r.name),1),Z,e("span",null,u(r.level),1)],8,Y))),128))])):(a(),t("div",$,[e("div",ee,[l(_,{class:"h-16 w-16 mb-2"}),e("small",se,[te,l(g,{class:"text-blue-600 font-semibold",to:"/register"},{default:j(()=>[ae]),_:1}),oe])])]))])):V("",!0)])]),e("div",ne,[l(w,{text:"Enregistrer [ "+((m=o.user)==null?void 0:m.name)+" ] comme gerant",variant:"bg",design:"primary",onClick:c.onPressAssign},null,8,["text","onClick"])])]))])}const we=x(E,[["render",le]]);export{we as default};
