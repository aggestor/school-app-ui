import{T as I}from"./TextBox-7a965e88.js";import{_ as k,B as j,C as A,c,b as e,a,t as d,w as g,q as S,d as n,f as i,g as l}from"./index-4f0251ba.js";import{B as L}from"./ButtonLink-43715362.js";import{S as x}from"./shop-37c8544f.js";import{B as V}from"./branch-689a9ce0.js";import{C as P}from"./category-855ddfae.js";import{r as T}from"./PhotoIcon-a21ae8ef.js";import{r as N}from"./PlusCircleIcon-776f3ae5.js";import{P as F}from"./PagesNavigationHeader-c8c7004e.js";import{u as G}from"./useVerify-b9fe02ca.js";import{L as q}from"./location-bd5000e1.js";import{u as E}from"./use-transpiler-49b8a80b.js";import{G as O}from"./GoBackAdminButton-a12efcb1.js";import{r as R}from"./FaceFrownIcon-82098295.js";import"./ArrowLeftIcon-5af96ac5.js";const z={components:{ButtonLink:L,Button:j,TextBox:I,CheckCircleIcon:A,PagesNavigationHeader:F,PhotoIcon:T,PlusCircleIcon:N,GoBackAdminButton:O,FaceFrownIcon:R},data(){return{address:"",errors:{},image:"",contact:"",whatsApp:"",town:"",locationId:"",category:"",currentCat:"",fileImage:"",name:"",location:[],owner:"",transpiledLocations:[],currentButton:"Basic",promptSuccessBox:!1,locations:[],transpiledCat:[],chosenCat:[],datalistCat:"",datalistCatId:"",shop:{}}},setup(){G("owner")},mounted(){this.getShop(),this.getLocation()},methods:{async handleChange(t){if(this[t.target.name]=t.target.value,t.target.name==="town"){const o=this.locations.filter(u=>u.name===t.target.value);o[0]?(this.locationId=o[0].id,this.errors.town=void 0):this.errors.town="Ville choisie invalide !"}},async onPressRegister(){const t=await V.create_({name:this.name,town:this.locationId,location:this.town,image:this.fileImage,owner:this.owner,shop_id:this.shop.id,contact:this.contact,whatsApp:this.whatsApp,address:this.address});t.type==="error"?this.errors=t.data:t.type=="success"?(this.errors={},this.promptSuccessBox=!0):t.type=="auth"&&(localStorage.removeItem("admin"),this.$router.push("/admin/login"))},chooseShopType(t){this.currentButton=t},fireChoseMethod(){const t=this.chosenCat.filter(o=>o.name==this.currentCat.name);Array.isArray(t)&&t.length>0?this.errors.category="Catégorie déjà choisie":((this.currentButton==="Basic"&&this.chooseShopType.length===1||this.currentButton==="Standard"&&this.chosenCat.length+1<4||this.currentButton==="Business"&&this.chosenCat.length+1<11)&&(this.chosenCat.push(this.currentCat),this.datalistCat===""&&this.datalistCatId==""?(this.datalistCat=this.currentCat.name,this.datalistCatId=this.currentCat.id):(this.datalistCat=this.datalistCat+"$"+this.currentCat.name,this.datalistCatId=this.datalistCatId+"$"+this.currentCat.id)),this.errors.category=void 0),this.category=""},async loadImage(t){this.image=URL.createObjectURL(t.target.files[0]),this.fileImage=t.target.files[0]},handleLoadImage(){this.$refs.input.click()},async getLocation(){const t=await q.getAll();t.type==="success"&&(this.locations=t.data),this.transpiledLocations=E(t,{key:"id".id,value:"name"})},async getCategories(){const t=await P.getAll();t.data.forEach(o=>{this.transpiledCat.push({key:o.id,value:o.name})}),this.categories=t.data},async getShop(){const t=JSON.parse(localStorage.getItem("logged_in_user"));if(this.owner=t.data.id,this.$route.params.id){const o=await x.getByOwner(this.$route.params.id);o.type==="success"&&(this.shop=o.data,this.shop.id=o.data.id)}else{const o=await x.getUsingOwner(t.data.id);o.type=="success"&&(console.log(o.data),this.shop.name=o.data.shop.shop_name,this.shop.id=o.data.shop.shop_id,this.shop.level=o.data.shop.shop_level)}}}},U={class:"w-11/12 mx-auto flex justify-center items-center md:h-[600px]"},W={key:0,class:"p-4 h-96 w-8/12 flex justify-center items-center flex-col rounded border"},D={class:"w-full flex items-center"},H=n(),J=e("span",{class:"ml-1 mr-1"},"|",-1),M=n(),K={class:"text-xl text-gray-700"},Q=n("Créer une branche pour "),X={class:"font-semibold"},Y={class:"h-full flex flex-col justify-center items-center"},Z={class:"text-gray-600 w-10/12"},$=n("Salut, vous ne pouvez pas creer de branche maintenat pour votre shop. "),ee=n(" est du niveau "),te=e("b",null,"Basic",-1),se=n(" qui fait que vous ne pouvez que posseder votre shop mais pas lui rajouter des branches."),oe={key:1,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-8/12 w-full overflow-hidden __shad flex md:flex-row flex-col justify-between items-center h-96 md:h-[60%] rounded-lg border"},ae={class:"md:w-6/12 w-full h-[50%] flex md:h-full bg-green-500 md:p-8 p-6 justify-center items-center flex-col"},ne=e("h1",{class:"font-semibold text-2xl text-white mt-3"},"Création éffectuée.",-1),re={class:"md:w-6/12 w-full h-[50%] flex items-center flex-col justify-center md:h-full"},ie={class:"text-gray-800 text-center md:w-11/12 w-10/12"},ce=n("La création du de la branche "),le=n(" a été éffectuée avec succès. Vous pouvez maintenant ajouter y mettre des produits, etc..."),he={class:"bg-green-500 shadow-green-300 shadow-lg px-2 py-1.5 mt-5 hover:bg-green-600 rounded text-white text-lg"},de=n("Continuer"),ue={key:2,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-10/12 w-full bg-white __shad flex justify-between items-center border h-[92%] rounded-lg"},me={class:"md:w-7/12 flex h-[80%] md:p-6 p-4 justify-center flex-col"},pe={class:"flex items-center"},_e=n(),fe=e("span",{class:"ml-1 mr-1"},"|",-1),ge=n(),xe=e("h1",{class:"font-semibold text-xl text-gray-700"},"Créer une branche",-1),we={class:"h-full w-full flex flex-col"},Ce={class:"md:w-9/12"},ye={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},ve={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},be={class:"text-sm mt-4"},Be=n("En créant une branche, le propriétaire accepte "),Ie=e("span",{class:"text-blue-700"},"les Conditions générales de vendeur",-1),ke=n(" sur muyiSphere."),je={class:"w-full items-center mt-2 flex justify-between"},Ae={class:"w-5/12 md:flex hidden flex-col items-center justify-center h-full"},Se={class:"h-60 w-60 relative flex justify-center items-center rounded border"},Le={key:0,class:"flex justify-center flex-col items-center"},Ve=e("span",null,"Ajouter un logo",-1),Pe={class:"text-red-500 mt-1 text-sm"},Te={key:1,class:"w-full h-full p-2"},Ne=["src"],Fe={class:"absolute cursor-pointer -bottom-5 h-10 w-10"},Ge={key:0,class:"text-red-500 mt-2 text-sm"};function qe(t,o,u,Ee,s,r){var _,f;const m=i("GoBackAdminButton"),w=i("FaceFrownIcon"),C=i("CheckCircleIcon"),p=i("router-link"),h=i("TextBox"),y=i("Button"),v=i("PhotoIcon"),b=i("PlusCircleIcon");return l(),c("div",U,[((f=(_=s.shop)==null?void 0:_.level)==null?void 0:f.toLowerCase())==="basic"?(l(),c("div",W,[e("div",D,[a(m),H,J,M,e("h1",K,[Q,e("span",X,d(s.shop.name),1)])]),e("div",Y,[a(w,{class:"h-40 text-gray-500"}),e("p",Z,[$,e("b",null,d(s.shop.name),1),ee,te,se])])])):s.promptSuccessBox?(l(),c("div",oe,[e("div",ae,[a(C,{class:"w-20 h-20 text-white"}),ne]),e("div",re,[e("span",ie,[ce,e("b",null,d(s.name),1),le]),e("span",he,[a(p,{to:"/owner/branches"},{default:g(()=>[de]),_:1})])])])):(l(),c("div",ue,[e("div",me,[e("div",pe,[a(m),_e,fe,ge,xe]),e("form",we,[e("div",Ce,[a(h,{onChange:r.handleChange,label:"Nom de la branche",type:"text",name:"name",placeholder:"Le nom de votre shop",value:s.name,err:s.errors.name},null,8,["onChange","value","err"])]),e("div",ye,[a(h,{onChange:r.handleChange,label:"Contact",type:"text",name:"contact",placeholder:"Contact",value:s.contact,err:s.errors.contact},null,8,["onChange","value","err"]),a(h,{onChange:r.handleChange,label:"WhatsApp",type:"text",name:"whatsApp",placeholder:"Votre WhatsApp",value:s.whatsApp,err:s.errors.whatsapp},null,8,["onChange","value","err"])]),e("div",ve,[a(h,{onChange:r.handleChange,items:s.transpiledLocations,list:"location",label:"Ville",type:"text",name:"town",placeholder:"Votre ville",value:s.town,err:s.errors.town},null,8,["onChange","items","value","err"]),a(h,{onChange:r.handleChange,label:"Addresse précise",type:"text",name:"address",placeholder:"Votre Addresse Exacte",value:s.address,err:s.errors.address},null,8,["onChange","value","err"])])]),e("p",be,[Be,a(p,{to:"/term-of-use"},{default:g(()=>[Ie]),_:1}),ke]),e("div",je,[a(y,{text:"Créer cette branche",variant:"bg",design:"primary",onClick:r.onPressRegister},null,8,["onClick"])])]),e("div",Ae,[e("div",Se,[s.image?(l(),c("div",Te,[e("img",{src:s.image,class:"h-full w-full object-cover",alt:"Company logo"},null,8,Ne)])):(l(),c("div",Le,[e("input",{hidden:"",ref:"input",type:"file",name:"file",onChange:o[0]||(o[0]=(...B)=>r.loadImage&&r.loadImage(...B))},null,544),a(v,{class:"h-16 cursor-pointer w-16 text-gray-500"}),Ve,e("span",Pe,d(s.errors.image),1)])),e("div",Fe,[a(b,{onClick:r.handleLoadImage,class:"h-8 hover:text-gray-400 w-8 text-gray-500"},null,8,["onClick"])])]),s.image?(l(),c("span",Ge,d(s.errors.image),1)):S("",!0)])]))])}const et=k(z,[["render",qe]]);export{et as default};
