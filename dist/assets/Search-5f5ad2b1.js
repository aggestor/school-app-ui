import{r,o as L,c as a,b as s,a as i,u as y,F as f,i as x,q as p,d as A,t as d,ad as g,g as o,ae as B,p as F,z as N,y as V}from"./index-4f0251ba.js";import{r as $}from"./XMarkIcon-ae1ed58b.js";import{P as q}from"./ProductCard-61eec869.js";import{F as P}from"./FirstHomeSection-c9da0da6.js";import"./PhoneIcon-b7b5cd97.js";import"./format-date-ae167d6c.js";import"./Whatsapp-6d47fcdb.js";const I={class:"w-[95%] mx-auto"},M={key:0,class:"w-[95%] mx-auto flex flex-col items-center justify-center h-[400px] md:h-[620px]"},z=s("h1",{class:"mb-4 text-3xl font-bold text-blue-500"},"Muyisphere Search",-1),D={class:"max-h-96 transition-all duration-500 md:w-6/12 w-full hover:shadow hover:shadow-gray-400 hover:border-t rounded-3xl p-2 border border-gray-300"},E={class:"w-full h-8 flex justify-between"},T={class:"h-full w-10 mr-2 grid place-items-center"},U=["value"],G={key:0,"data-aos":"slide-up",class:"h-80 overflow-auto __scrollbar w-full mt-2"},H=["onClick"],J={class:"font-semibold text-sm"},K={class:"text-xs text-gray-500"},O={key:1,class:"flex justify-center items-center h-full"},Q={key:1,class:"w-[95%] mx-auto flex flex-col items-center justify-center h-auto"},W={class:"p-2 w-full border-b"},X={class:"font-semibold"},Y={class:"w-full my-3 flex spacey flex-wrap justify-evenly h-auto"},ne={__name:"Search",setup(Z){const _=r(!1),c=r(!1),u=r(!1),h=r([]),m=r([]),n=r(""),v=r(451),w=F(),b=N(),k=async e=>{if(e.target.value.length>=2){n.value=e.target.value,u.value=!0,c.value=!0;const t=await g.elementarySearch(e.target.value);t.type==="success"&&(h.value=Array.isArray(t.data)?t.data:[t.data]),u.value=!1}else c.value=!1},S=e=>{w.push(`/products/${V(e.prod_name)}/${e.prod_id}`),c.value=!1},C=()=>{const{query:e,params:t,path:l}=b;e.term&&(_.value=!0,n.value=e.term,R(e.term))},R=async e=>{const t=await g.collectionSearch(e);t.type=="success"&&t.data!==!1&&(m.value=Array.isArray(t.data)?t.data:[t.data],v.value=t.data.length)},j=()=>{c.value=!1,n.value=""};return L(()=>{C()}),(e,t)=>(o(),a(f,null,[s("div",I,[i(P)]),_.value?(o(),a("div",Q,[s("div",W,[s("h1",null,[A(d(v.value)+" resultats pour ",1),s("span",X,d(n.value),1)])]),s("div",Y,[(o(!0),a(f,null,x(m.value,l=>(o(),a("div",{class:"my-3",key:l.id},[i(q,{content:l},null,8,["content"])]))),128))])])):(o(),a("div",M,[z,s("div",D,[s("div",E,[s("span",T,[i(y(B),{class:"h-6 w-6 text-gray-400"})]),s("input",{value:n.value,onInput:k,class:"outline-none bg-transparent w-full",type:"text"},null,40,U),s("span",{onClick:j,class:"h-full cursor-pointer border-l ml-2 w-10 grid place-items-center"},[i(y($),{class:"h-6 w-6 text-gray-400"})])]),c.value?(o(),a("div",G,[h.value&&!u.value?(o(!0),a(f,{key:0},x(h.value,l=>(o(),a("div",{onClick:ee=>S(l),class:"p-2 hover:bg-gray-100 cursor-pointer flex flex-col",key:l.prod_id},[s("span",J,d(l.prod_name),1),s("span",K,d(l.cat_name),1)],8,H))),128)):p("",!0),u.value?(o(),a("div",O," Loading... ")):p("",!0)])):p("",!0)])]))],64))}};export{ne as default};
