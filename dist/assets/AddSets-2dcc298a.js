import{T as k}from"./TextBox-7a965e88.js";import{r as s,o as S,c as o,a as l,b as c,w as g,g as r,F as y,i as _,t as h,B as j}from"./index-4f0251ba.js";import{D as x}from"./Datalist-67627a9c.js";import{C as N}from"./category-855ddfae.js";import{P as E}from"./PagesNavigationHeader-c8c7004e.js";import{M}from"./models-804a584c.js";import{S as V}from"./set-dcd81a5b.js";import{S as D}from"./SuccessComponent-d31b415f.js";import{u as I}from"./useVerify-b9fe02ca.js";import"./ArrowLeftIcon-5af96ac5.js";import"./XMarkIcon-ae1ed58b.js";const L={class:"w-full md:h-[90%] flex justify-center items-center"},P={key:0,class:"md:w-5/12 border w-11/12 md:mb-5 mb-3 mt-10 bg-white __shad shadow-gray-200 flex h-auto rounded p-8 justify-center flex-col"},z=c("p",{class:"text-gray-600 mb-3 text-sm"},"Remplissez le champ ci-bas pour enregister une nouvelle série.",-1),F={class:"h-full w-full flex flex-col"},T=["value"],H=["value"],R={class:"w-full flex mt-3 justify-between"},q={key:1,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"},ae={__name:"AddSets",setup(G){I();const n=s({}),u=s(""),b=s(""),f=s(0),v=s(0),w=s(""),p=s(""),m=s([]),i=s([]);S(()=>B());async function d(e){if(e.target.name==="category")if(e.target.value.length>=2){const a=m.value.filter(t=>t.name===e.target.value);a[0]&&(A(a[0].id),f.value=a[0].id)}else i.value=[];else if(e.target.name==="model"){const a=i.value.filter(t=>t.mod_name===e.target.value);a[0]&&(v.value=a[0].mod_id)}else u.value=e.target.value}async function C(){const e=await V.create({name:u.value,category:f.value,model:v.value});e.type==="error"?n.value=e.data:e.type==="success"&&(n.value={},p.value=!0)}async function B(){const e=await N.getAll();m.value=Array.isArray(e.data)?e.data:[e.data]}async function A(e){const a=await M.getAllByCategory(e);a.type==="success"&&(i.value=Array.isArray(a.data)?a.data:[a.data])}return(e,a)=>(r(),o("div",L,[p.value?(r(),o("div",q,[l(D,{path:"/admin/sets",title:"Enregitrement effectué !",message:"La série a été enregistrée avec succès. Elle est maintenant utilisable partout. Vous pouvez la modifier mais pas le supprimer définitivément."})])):(r(),o("div",P,[l(E,{title:"Ajout  d'une serie"}),z,c("form",F,[l(k,{onChange:d,type:"text",name:"name",label:"Nom de la série",value:u.value,placeholder:"Nom du type",err:n.value.name},null,8,["value","err"]),l(x,{onChange:d,type:"text",name:"category",label:"Choisir la catégorie",value:b.value,placeholder:"Choisir la catégorie",err:n.value.category},{default:g(()=>[(r(!0),o(y,null,_(m.value,t=>(r(),o("option",{value:t.name,key:t.id},h(t.name),9,T))),128))]),_:1},8,["value","err"]),l(x,{onChange:d,type:"text",name:"model",label:"Choisir le modèle",value:w.value,placeholder:"Choisir le modele",err:n.value.model},{default:g(()=>[(r(!0),o(y,null,_(i.value,t=>(r(),o("option",{value:t.mod_name,key:t.mod_name},h(t.mod_name),9,H))),128))]),_:1},8,["value","err"])]),c("div",R,[l(j,{text:"Enregistrer",variant:"bg",design:"primary",onClick:C})])]))]))}};export{ae as default};
