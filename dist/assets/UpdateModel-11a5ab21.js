import{T as C}from"./TextBox-7a965e88.js";import{_ as b,r as t,o as w,B,C as k,c as h,a as l,b as y,z as I,f as u,g as _}from"./index-4f0251ba.js";import{B as N}from"./ButtonLink-43715362.js";import{C as M}from"./category-855ddfae.js";import{P}from"./PagesNavigationHeader-c8c7004e.js";import{M as S}from"./models-804a584c.js";import{S as j}from"./SuccessComponent-d31b415f.js";import{u as E}from"./useVerify-b9fe02ca.js";import"./ArrowLeftIcon-5af96ac5.js";import"./XMarkIcon-ae1ed58b.js";const T={setup(){E();const c=t(""),r=t(""),p=t(""),a=t(!1),i=t([]),f=t(""),m=t([]),o=t(void 0);async function g(e){if(e.target.name==="name"&&(r.value=e.target.value),e.target.name==="category"&&e.target.value.length>2){const n=i.value.filter(d=>d.name==e.target.value);n[0]&&(o.value=n[0].id)}}const v=async()=>{const e=await M.getAll(),n=Array.isArray(e.data)?e.data:[e.data];n.forEach(d=>{m.value.push({key:d.id,value:d.name})}),i.value=n},x=async()=>{const e=await S.update({name:r.value,modelId:f.value,category:o.value});e.type==="error"?c.value=e.data:(c.value={},a.value=!0)},s=I();return w(()=>{s.params&&v().then(()=>{o.value=s.params.category,f.value=s.params.id,p.value=i.value.filter(e=>e.id==s.params.category)[0].name,r.value=s.params.name.replace(/(\-)/gi," ")})}),{errors:c,name:r,transpiledCat:m,promptSuccessBox:a,onPressCreate:x,handleInput:g,category:p}},components:{ButtonLink:N,Button:B,TextBox:C,CheckCircleIcon:k,PagesNavigationHeader:P,SuccessComponent:j}},V={class:"w-full md:h-[90%] flex justify-center items-center"},z={key:0,class:"md:w-5/12 border w-11/12 md:mb-5 mb-3 mt-10 bg-white __shad shadow-gray-200 flex h-auto rounded p-8 justify-center flex-col"},A=y("p",{class:"text-gray-600 mb-3 text-sm"},"Remplissez le champ ci-bas pour modifier un modele.",-1),H={class:"h-full w-full flex flex-col"},L={class:"w-full flex mt-3 justify-between"},R={key:1,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"};function U(c,r,p,a,i,f){const m=u("PagesNavigationHeader"),o=u("TextBox"),g=u("Button"),v=u("SuccessComponent");return _(),h("div",V,[a.promptSuccessBox?(_(),h("div",R,[l(v,{path:"/admin/models",title:"Modification effectuée !",message:"Le modele  a été enregistré avec succès. Elle est maintenant utilisable partout. Vous pouvez la modifier mais pas la supprimer définitivément."})])):(_(),h("div",z,[l(m,{title:"Modification  d'un model"}),A,y("form",H,[l(o,{onChange:a.handleInput,type:"text",name:"name",label:"Nom du model",value:a.name,placeholder:"Nom de la sous catégorie",err:a.errors.name},null,8,["onChange","value","err"]),l(o,{list:"category",items:a.transpiledCat,onChange:a.handleInput,type:"text",name:"category",label:"Choisir la catégorie",value:a.category,placeholder:"Choisir la catégorie",err:a.errors.category},null,8,["items","onChange","value","err"])]),y("div",L,[l(g,{text:"Enregistrer",variant:"bg",design:"primary",onClick:a.onPressCreate},null,8,["onClick"])])]))])}const Y=b(T,[["render",U]]);export{Y as default};
