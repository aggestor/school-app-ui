import{T as y}from"./TextBox-7a965e88.js";import{r as a,o as h,c as s,a as o,b as m,w as _,g as r,F as x,i as b,t as w,B as C}from"./index-4f0251ba.js";import{C as B}from"./category-855ddfae.js";import{P as k}from"./PagesNavigationHeader-c8c7004e.js";import{S as j}from"./SuccessComponent-d31b415f.js";import{M as A}from"./models-804a584c.js";import{u as N}from"./useVerify-b9fe02ca.js";import{D as M}from"./Datalist-67627a9c.js";import"./ArrowLeftIcon-5af96ac5.js";import"./XMarkIcon-ae1ed58b.js";const S={class:"w-full md:h-[90%] flex justify-center items-center"},V={key:0,"data-aos":"zoom-in","data-aos-duration":"700",class:"md:w-5/12 border w-11/12 md:mb-5 mb-3 mt-10 bg-white __shad shadow-gray-200 flex h-auto rounded p-8 justify-center flex-col"},z=m("p",{class:"text-gray-600 mb-3 text-sm"},"Remplissez le champ ci-bas pour enregister un nouveau modèle.",-1),D={class:"h-full w-full flex flex-col"},E=["value"],I={class:"w-full flex mt-3 justify-between"},L={key:1,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"},Q={__name:"AddModels",setup(P){N();const l=a({}),n=a(""),c=a(0),p=a(""),d=a(!1),i=a([]);h(v);async function f(e){if(e.target.name=="name"&&(n.value=e.target.value),e.target.name=="category"){const u=i.value.filter(t=>t.name==e.target.value);u[0]&&(c.value=u[0].id)}}async function g(){const e=await A.create({name:n.value,category:c.value});e.type==="error"?l.value=e.data:e.type==="success"&&(l.value={},d.value=!0)}async function v(){const e=await B.getAll();e.type==="success"&&(i.value=Array.isArray(e.data)?e.data:[e.data])}return(e,u)=>(r(),s("div",S,[d.value?(r(),s("div",L,[o(j,{path:"/admin/models",title:"Enregitrement effectué !",message:`Le modèle ${n.value} a été enregistré avec succès. Il est maintenant utilisable partout. Vous pouvez le modifier mais pas le supprimer définitivément.`},null,8,["message"])])):(r(),s("div",V,[o(k,{title:"Ajout  d'un modèle"}),z,m("form",D,[o(y,{onChange:f,type:"text",name:"name",label:"Nom du modèle",value:n.value,placeholder:"Nom du modèle",err:l.value.name},null,8,["value","err"]),o(M,{onChange:f,type:"text",name:"category",label:"Choisir la catégorie",value:p.value,placeholder:"Choisir la catégorie",err:l.value.category},{default:_(()=>[(r(!0),s(x,null,b(i.value,t=>(r(),s("option",{value:t.name,key:t.id},w(t.name),9,E))),128))]),_:1},8,["value","err"])]),m("div",I,[o(C,{text:"Enregistrer",variant:"bg",design:"primary",onClick:g})])]))]))}};export{Q as default};
