import{r as l,o as B,c as n,a as c,b as e,t as u,w as N,F as p,i as g,d as w,z as L,g as i,u as V,B as D}from"./index-4f0251ba.js";import{S as x}from"./shop-37c8544f.js";import{C as E}from"./category-855ddfae.js";import{G as F}from"./GoBackAdminButton-a12efcb1.js";import{u as M}from"./useVerify-b9fe02ca.js";import{D as z}from"./Datalist-67627a9c.js";import{r as G}from"./XMarkIcon-ae1ed58b.js";import{S as R}from"./SuccessComponent-d31b415f.js";import"./ArrowLeftIcon-5af96ac5.js";const $={class:"w-11/12 mx-auto flex justify-center items-center h-auto mt-10"},A={key:0,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-8/12 w-full overflow-hidden __shad flex md:flex-row flex-col justify-between items-center h-96 md:h-60 rounded-lg border"},I={key:1,"data-aos":"fade-in","data-aos-duration":"500",class:"lg:w-6/12 w-full bg-white __shad flex justify-between items-center border h-auto rounded-lg"},P={class:"flex md:h-auto md:p-6 p-4 w-full justify-center flex-col"},T={class:"flex items-center"},U=w(),q=e("span",{class:"ml-1 mr-1"},"|",-1),H=e("h1",{class:"font-semibold text-lg text-gray-700"},"Modifier la categorisation d'un shop",-1),J={class:"h-full w-full flex flex-col"},K={class:"w-full"},O={class:"w-full text-sm my-3 border p-1 rounded"},Q=e("div",{class:"text-base font-semibold"},"Information sur le shop",-1),W={class:"flex justify-between"},X=e("span",null,"Nom",-1),Y={class:"font-semibold"},Z={class:"flex justify-between"},ee=e("span",null,"Niveau",-1),te={class:"font-semibold text-green-600"},se={class:"flex justify-between"},ae=e("span",null,"Categories",-1),oe={class:"font-semibold w-[70%] text-right"},le={class:"flex justify-between mb-2 items-center w-full"},ne=["value"],ie={class:"flex overflow-auto p-1 flex-wrap h-36 rounded w-full border"},re={class:"rounded-full ml-1 mb-1 border-2 w-fit p-1 border-blue-600 h-fit flex items-center text-blue-600 text-xs"},ce=["onClick"],ue={class:"w-full items-center mt-2 flex justify-between"},be={__name:"UpdateShopCategories",setup(de){M();const m=l([]),v=l(!1),a=l([]),d=l([]),h=l(""),o=l({}),_=l({}),y=L(),b=async t=>{const s=await x.get(t);s.type=="success"&&(o.value=s.data)},C=async()=>{const t=await E.getAll();t.type==="success"&&(m.value=t.data)},j=t=>{h.value=t.target.value;const s=m.value.filter(f=>f.name===t.target.value);o.value.level==="Basic"&&a.value.length+1<=1||o.value.level==="Standard"&&a.value.length+1<4||o.value.level==="Business"&&a.value.length+1<11?s[0]&&(a.value.includes(s[0].name)?_.value.category="Categorie deja choisie":(a.value.push(s[0].name),d.value.push(s[0]),t.target.value="",h.value="")):_.value.category="Exces de choix de categories !!"},S=t=>{a.value=a.value.filter(s=>s!=t),d.value=d.value.filter(s=>s.name!=t)},k=async()=>{(await x.updateCategorization(o.value.id,d.value)).type==="success"&&(v.value=!0)};return B(()=>{b(y.params.id),C()}),(t,s)=>{var f;return i(),n("div",$,[v.value?(i(),n("div",A,[c(R,{title:"Mise en jours effectuee",message:"La mise en jours de la categorisation de ce shop a ete effectuee !, Cette mise en jours est tenue en compte  a partir de maintenant !",path:"/admin/shops"})])):(i(),n("div",I,[e("div",P,[e("div",T,[c(F),U,q,H]),e("form",J,[e("div",K,[e("div",O,[Q,e("div",W,[X,e("span",Y,u(o.value.name),1)]),e("div",Z,[ee,e("span",te,u(o.value.level),1)]),e("div",se,[ae,e("span",oe,u((f=o.value.categories)==null?void 0:f.replace(/\$/gi,", ")),1)])]),e("div",le,[c(z,{list:"category",onChange:j,type:"text",name:"category",label:"Choisir les nouvelles catégories",value:h.value,placeholder:"Selectionner parmis ces catégories",error:_.value.category},{default:N(()=>[(i(!0),n(p,null,g(m.value,r=>(i(),n("option",{key:r.id,value:r.name},u(r.name),9,ne))),128))]),_:1},8,["value","error"])]),e("div",ie,[(i(!0),n(p,null,g(a.value,r=>(i(),n("span",re,[w(u(r)+" ",1),e("span",{onClick:fe=>S(r),class:"w-5 h-5 rounded-full ml-1 cursor-pointer grid place-items-center bg-blue-200"},[c(V(G),{class:"w-4 h-4"})],8,ce)]))),256))])])]),e("div",ue,[c(D,{text:"Enregistrer",variant:"bg",design:"primary",onClick:k})])])]))])}}};export{be as default};
