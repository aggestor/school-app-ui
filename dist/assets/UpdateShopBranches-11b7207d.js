import{T as B}from"./TextBox-7a965e88.js";import{_ as k,B as L,C as j,s as A,c as l,b as e,a as n,t as m,w as p,q as V,d as c,f as r,g as i,F as P,i as S}from"./index-4f0251ba.js";import{B as D}from"./ButtonLink-43715362.js";import{D as N}from"./Datalist-67627a9c.js";import{B as g}from"./branch-689a9ce0.js";import{r as G}from"./PhotoIcon-a21ae8ef.js";import{r as T}from"./PlusCircleIcon-776f3ae5.js";import{P as E}from"./PagesNavigationHeader-c8c7004e.js";import{L as R}from"./location-bd5000e1.js";import{G as U}from"./GoBackAdminButton-a12efcb1.js";import"./ArrowLeftIcon-5af96ac5.js";const F={components:{ButtonLink:D,Button:L,TextBox:B,CheckCircleIcon:j,PagesNavigationHeader:E,PhotoIcon:G,PlusCircleIcon:T,GoBackAdminButton:U,Datalist:N},data(){return{id:"",address:"",errors:{},image:"",contact:"",whatsApp:"",town:"",locationId:"",currentCat:"",fileImage:"",oldImage:"",name:"",location:[],transpiledLocations:[],promptSuccessBox:!1,locations:[],shop:{}}},mounted(){this.getLocation(),this.getShop()},methods:{async handleChange(s){if(this[s.target.name]=s.target.value,s.target.name==="town"){const o=this.locations.filter(d=>d.name===s.target.value);o[0]?(this.locationId=o[0].id,this.errors.town=void 0):this.errors.town="Ville choisie invalide !"}},async onPressRegister(){const s=await g.update({name:this.name,town:this.locationId,location:this.town,image:this.fileImage,oldImage:this.oldImage,id:this.$route.params.branch,owner:this.shop.owner_id,shop_id:this.shop.id,contact:this.contact,whatsApp:this.whatsApp,address:this.address});s.type==="error"?this.errors=s.data:s.type=="success"?(this.errors={},this.promptSuccessBox=!0):s.type=="auth"&&(localStorage.removeItem("admin"),this.$router.push("/admin/login"))},async loadImage(s){this.image=URL.createObjectURL(s.target.files[0]),this.fileImage=s.target.files[0]},handleLoadImage(){this.$refs.inputImage.click()},async getLocation(){const s=await R.getAll();s.type==="success"&&(this.locations=s.data)},async getShop(){const s=await g.get(this.$route.params.branch);if(s.type==="success"){const o=s.data;this.name=o.name,this.contact=o.contact,this.whatsApp=o.contact_whatsapp,this.town=o.location,this.address=o.full_address,this.image=A+"/shops/"+o.logo,this.oldImage=o.logo;const d=this.locations.filter(_=>_.name===o.location);this.locationId=d[0]?d[0].id:"",this.shop=s.data}}}},M={class:"w-11/12 mx-auto flex justify-center items-center md:h-auto my-10"},W={key:0,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-8/12 w-full overflow-hidden __shad flex md:flex-row flex-col justify-between items-center h-96 md:h-[60%] rounded-lg border"},q={class:"md:w-6/12 w-full h-[50%] flex md:h-full bg-green-500 md:p-8 p-6 justify-center items-center flex-col"},z=e("h1",{class:"font-semibold text-2xl text-white mt-3"},"Modification éffectuée.",-1),H={class:"md:w-6/12 w-full h-[50%] flex items-center flex-col justify-center md:h-full"},O={class:"text-gray-800 text-center md:w-11/12 w-10/12"},J=c("La modification de la branche "),K=c(" a été éffectuée avec succès. Vous pouvez maintenant ajouter y mettre des produits, etc..."),Q={class:"bg-green-500 shadow-green-300 shadow-lg px-2 py-1.5 mt-5 hover:bg-green-600 rounded text-white text-lg"},X=c("Continuer"),Y={key:1,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-10/12 w-full bg-white __shad flex justify-between items-center border h-[92%] rounded-lg"},Z={class:"md:w-7/12 flex h-[80%] md:p-6 p-4 justify-center flex-col"},$={class:"flex items-center"},ee=c(),te=e("span",{class:"ml-1 mr-1"},"|",-1),se=c(),oe={class:"text-lg text-gray-700"},ne=c("Modifier "),ae={class:"font-semibold"},re={class:"h-full w-full flex flex-col"},le={class:"md:w-9/12"},ie={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},ce={class:"w-full flex md:space-x-1 flex-col md:flex-row items-center justify-between"},de=["value"],he={class:"text-sm mt-4"},me=c("En créant une branche, le propriétaire accepte "),ue=e("span",{class:"text-blue-700"},"les Conditions générales de vendeur",-1),pe=c(" sur muyiSphere."),_e={class:"w-full items-center mt-2 flex justify-between"},fe={class:"w-5/12 md:flex hidden flex-col items-center justify-center h-full"},ge={class:"h-60 w-60 relative flex justify-center items-center rounded border"},xe={key:0,class:"flex justify-center flex-col items-center"},we=e("span",null,"Ajouter une photo",-1),ve={class:"text-red-500 mt-1 text-sm"},ye={key:1,class:"w-full h-full p-2"},Ce=["src"],be={class:"absolute cursor-pointer -bottom-5 h-10 w-10"},Ie={key:0,class:"text-red-500 mt-2 text-sm"};function Be(s,o,d,_,t,a){const x=r("CheckCircleIcon"),f=r("router-link"),w=r("GoBackAdminButton"),u=r("TextBox"),v=r("Datalist"),y=r("ButtonLink"),C=r("Button"),b=r("PhotoIcon"),I=r("PlusCircleIcon");return i(),l("div",M,[t.promptSuccessBox?(i(),l("div",W,[e("div",q,[n(x,{class:"w-20 h-20 text-white"}),z]),e("div",H,[e("span",O,[J,e("b",null,m(t.name),1),K]),e("span",Q,[n(f,{to:"/admin/shops/"+t.shop.id+"/branches"},{default:p(()=>[X]),_:1},8,["to"])])])])):(i(),l("div",Y,[e("div",Z,[e("div",$,[n(w),ee,te,se,e("h1",oe,[ne,e("span",ae,m(t.shop.name),1)])]),e("form",re,[e("div",le,[n(u,{onChange:a.handleChange,label:"Nom du shop",type:"text",name:"name",placeholder:"Le nom de votre shop",value:t.name,err:t.errors.name},null,8,["onChange","value","err"])]),e("div",ie,[n(u,{onChange:a.handleChange,label:"Contact",type:"text",name:"contact",placeholder:"Votre contact",value:t.contact,err:t.errors.contact},null,8,["onChange","value","err"]),n(u,{onChange:a.handleChange,label:"WhatsApp",type:"text",name:"whatsApp",placeholder:"Votre WhatsApp",value:t.whatsApp,err:t.errors.whatsapp},null,8,["onChange","value","err"])]),e("div",ce,[n(v,{onChange:a.handleChange,items:t.transpiledLocations,list:"location",label:"Ville",type:"text",name:"town",placeholder:"Votre ville",value:t.town,err:t.errors.town},{default:p(()=>[(i(!0),l(P,null,S(t.locations,h=>(i(),l("option",{key:h.id,value:h.name},m(h.name),9,de))),128))]),_:1},8,["onChange","items","value","err"]),n(u,{onChange:a.handleChange,label:"Addresse précise",type:"text",name:"address",placeholder:"Votre Addresse Exacte",value:t.address,err:t.errors.address},null,8,["onChange","value","err"])])]),e("p",he,[me,n(f,{to:"/term-of-use"},{default:p(()=>[ue]),_:1}),pe]),e("div",_e,[n(y,{text:"Voir les branches",path:"/admin/shops/"+t.shop.shop_id+"/branches",variant:"default"},null,8,["path"]),n(C,{text:"Enregistrer",variant:"bg",design:"primary",onClick:a.onPressRegister},null,8,["onClick"])])]),e("div",fe,[e("div",ge,[e("input",{hidden:"",ref:"inputImage",type:"file",name:"file",onChange:o[0]||(o[0]=(...h)=>a.loadImage&&a.loadImage(...h))},null,544),t.image?(i(),l("div",ye,[e("img",{src:t.image,class:"h-full w-full object-cover",alt:"Company logo"},null,8,Ce)])):(i(),l("div",xe,[n(b,{class:"h-16 cursor-pointer w-16 text-gray-500"}),we,e("span",ve,m(t.errors.image),1)])),e("div",be,[n(I,{onClick:a.handleLoadImage,class:"h-8 hover:text-gray-400 w-8 text-gray-500"},null,8,["onClick"])])]),t.image?(i(),l("span",Ie,m(t.errors.image),1)):V("",!0)])]))])}const Ee=k(F,[["render",Be]]);export{Ee as default};
