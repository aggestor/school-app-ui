import{T as L}from"./TextBox-7a965e88.js";import{_ as P,B as V,C as T,s as R,c as a,a as n,b as e,t as h,w as _,q as v,H as p,F as b,d as l,f as c,g as r,i as D}from"./index-4f0251ba.js";import{B as N}from"./ButtonLink-43715362.js";import{S as B}from"./shop-37c8544f.js";import{C as z}from"./category-855ddfae.js";import{r as G}from"./ArrowRightIcon-f7029874.js";import{r as H}from"./PhotoIcon-a21ae8ef.js";import{r as M}from"./PlusCircleIcon-776f3ae5.js";import{P as E}from"./PagesNavigationHeader-c8c7004e.js";import{u as U}from"./logout-e8b700e1.js";import{L as F}from"./location-bd5000e1.js";import{G as W}from"./GoBackAdminButton-a12efcb1.js";import{D as q}from"./Datalist-67627a9c.js";import{R as O}from"./ReusableHeader-d460a56a.js";import{u as J}from"./useVerify-b9fe02ca.js";import"./ArrowLeftIcon-5af96ac5.js";const K={components:{ButtonLink:N,Button:V,TextBox:L,CheckCircleIcon:T,PagesNavigationHeader:E,PhotoIcon:H,PlusCircleIcon:M,GoBackAdminButton:W,Datalist:q,ReusableHeader:O,ArrowRightIcon:G},data(){return{address:"",errors:{},image:"",id:"",contact:"",whatsApp:"",town:"",locationId:"",category:"",currentCat:"",fileImage:"",name:"",oldImage:"",location:[],currentButton:"",promptSuccessBox:!1,locations:[],categories:[],chosenCat:[],datalistCat:"",datalistCatId:""}},mounted(){this.getLocation(),this.getCategories(),this.getShop()},setup(){J("owner")},methods:{async handleChange(s){if(this[s.target.name]=s.target.value,s.target.name==="town"){const o=this.locations.filter(d=>d.name===s.target.value);o[0]?(this.locationId=o[0].id,this.errors.town=void 0):this.errors.town="Ville choisie invalide !"}if(s.target.name==="category"){const o=this.categories.filter(d=>d.name==s.target.value)[0];o&&(this.currentCat=o)}},async onPressUpdate(){const s=await B.update({id:this.$route.params.id,name:this.name,town:this.locationId,location:this.town,image:this.fileImage,oldImage:this.oldImage,contact:this.contact,level:this.currentButton,whatsApp:this.whatsApp,address:this.address});s.type==="error"?this.errors=s.data:s.type=="success"&&(this.errors={},this.promptSuccessBox=!0)},chooseShopType(s){this.currentButton=s},fireChoseMethod(){const s=this.chosenCat.filter(o=>o.name==this.currentCat.name);Array.isArray(s)&&s.length>0?this.errors.category="Catégorie déjà choisie":((this.currentButton==="Basic"&&this.chosenCat.length+1<=1||this.currentButton==="Standard"&&this.chosenCat.length+1<4||this.currentButton==="Business"&&this.chosenCat.length+1<11)&&(this.chosenCat.push(this.currentCat),this.datalistCat===""&&this.datalistCatId==""?(this.datalistCat=this.currentCat.name,this.datalistCatId=this.currentCat.id):(this.datalistCat=this.datalistCat+"$"+this.currentCat.name,this.datalistCatId=this.datalistCatId+"$"+this.currentCat.id)),this.errors.category=void 0),this.category=""},async loadImage(s){this.image=URL.createObjectURL(s.target.files[0]),this.fileImage=s.target.files[0]},handleLoadImage(){this.$refs.input.click()},async getLocation(){const s=await F.getAll();U(s).then(o=>o==="success"?this.$router.push("/login"):null),s.type==="success"&&(this.locations=s.data)},async getCategories(){const s=await z.getAll();s.type==="success"&&(this.categories=Array.isArray(s.data)?s.data:[s.data])},async getShop(){const s=await B.get(this.$route.params.id);if(s.type==="success"){const o=s.data;this.id=o.id,this.name=o.name,this.contact=o.contact,this.whatsApp=o.contact_whatsapp;const d=this.locations.filter(g=>g.id===o.location);this.town=d[0]?d[0].name:"",this.locationId=o.location,this.address=o.full_address,this.currentButton=o.level,this.image=R+"/shops/"+o.logo,this.oldImage=o.logo}}}},Q={class:"w-11/12 mx-auto flex justify-center items-center md:h-auto my-10"},X={key:0,"data-aos":"zoom-in","data-aos-duration":"500",class:"md:w-8/12 w-full overflow-hidden __shad flex md:flex-row flex-col justify-between items-center h-96 md:h-[350px] rounded-lg border"},Y={class:"md:w-6/12 w-full h-[50%] flex md:h-full bg-green-500 md:p-8 p-6 justify-center items-center flex-col"},Z=e("h1",{class:"font-semibold text-2xl text-white mt-3"},"Modification éffectuée.",-1),$={class:"md:w-6/12 w-full h-[50%] flex items-center flex-col justify-center md:h-full"},ee={class:"text-gray-800 text-center md:w-11/12 w-10/12"},te=l("La modification du shop "),se=l(" a été éffectuée avec succès. Vous pouvez maintenant ajouter des produits dans ce shop, ajouter des succursales,etc..."),oe={class:"bg-green-500 shadow-green-300 shadow-lg px-2 py-1.5 mt-5 hover:bg-green-600 rounded text-white text-lg"},ne=l("Continuer"),ae={key:1,"data-aos":"zoom-in","data-aos-duration":"500",class:"md:w-10/12 w-full bg-white __shad flex justify-between items-center border h-[70%] rounded-lg"},re={class:"md:w-7/12 flex h-[80%] md:p-6 p-4 justify-center flex-col"},ie={class:"flex items-center"},le=l(),ce=e("span",{class:"ml-1 mr-1"},"|",-1),de=l(),he=e("h1",{class:"font-semibold text-2xl text-gray-700"},"Modifier un shop",-1),ue={class:"h-full w-full flex flex-col"},me={class:"w-full md:hidden flex flex-col items-center justify-center h-full"},fe={class:"h-60 w-full relative flex justify-center items-center rounded"},pe={key:0,class:"flex justify-center flex-col items-center"},_e=e("span",null,"Ajouter une photo",-1),ge={class:"text-red-500 mt-1 text-sm"},xe={key:1,class:"w-full h-full p-2"},we=["src"],ye={class:"absolute -bottom-5 h-10 w-10"},Ce={key:0,class:"text-red-500 mt-2 text-sm"},ve={class:"md:w-9/12"},be={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},Be={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},ke=["value"],Ie={class:"md:w-11/12 h-auto"},je=l(" Type de shop "),Ae={class:"w-full md:h-16 h-36 mb-2 border p-1 flex items-center justify-evenly flex-wrap md:justify-around rounded"},Se={key:0,class:"flex"},Le=l("Basic "),Pe={key:1,class:"flex"},Ve={key:0,class:"flex"},Te=l("Standard "),Re={key:1,class:"flex"},De={key:0,class:"flex"},Ne=l("Business "),ze={key:1,class:"flex"},Ge={key:0,class:"flex"},He=l("Premium "),Me={key:1,class:"flex"},Ee={class:"my-2 text-blue-600 flex"},Ue={class:"text-sm mt-4"},Fe=l("En créant un shop, vous acceptez "),We=e("span",{class:"text-blue-700"},"les Conditions générales de vendeur",-1),qe=l(" sur muyiSphere."),Oe={class:"w-full items-center mt-2 flex justify-between"},Je={class:"w-5/12 md:flex hidden flex-col items-center justify-center h-full"},Ke={class:"h-60 w-60 relative flex justify-center items-center rounded border"},Qe={key:0,class:"flex justify-center flex-col items-center"},Xe=e("span",null,"Ajouter une photo",-1),Ye={class:"text-red-500 mt-1 text-sm"},Ze={key:1,class:"w-full h-full p-2"},$e=["src"],et={class:"absolute -bottom-5 h-10 w-10"},tt={key:0,class:"text-red-500 mt-2 text-sm"};function st(s,o,d,g,t,i){const k=c("ReusableHeader"),u=c("CheckCircleIcon"),x=c("router-link"),I=c("GoBackAdminButton"),w=c("PhotoIcon"),y=c("PlusCircleIcon"),f=c("TextBox"),j=c("Datalist"),A=c("ArrowRightIcon"),C=c("ButtonLink"),S=c("Button");return r(),a(b,null,[n(k,{title:"Modification d'un shop"}),e("div",Q,[t.promptSuccessBox?(r(),a("div",X,[e("div",Y,[n(u,{class:"w-20 h-20 text-white"}),Z]),e("div",$,[e("span",ee,[te,e("b",null,h(t.name),1),se]),e("span",oe,[n(x,{to:"/admin/shops"},{default:_(()=>[ne]),_:1})])])])):(r(),a("div",ae,[e("div",re,[e("div",ie,[n(I),le,ce,de,he]),e("form",ue,[e("div",me,[e("div",fe,[t.image?(r(),a("div",xe,[e("img",{src:t.image,class:"h-full w-full object-cover",alt:"Company logo"},null,8,we)])):(r(),a("div",pe,[n(w,{class:"h-16 cursor-pointer w-16 text-gray-500"}),_e,e("span",ge,h(t.errors.image),1)])),e("div",ye,[n(y,{onClick:i.handleLoadImage,class:"h-8 hover:text-gray-400 w-8 text-gray-500"},null,8,["onClick"])])]),t.image?(r(),a("span",Ce,h(t.errors.image),1)):v("",!0)]),e("div",ve,[n(f,{onChange:i.handleChange,label:"Nom du shop",type:"text",name:"name",placeholder:"Le nom de votre shop",value:t.name,err:t.errors.name},null,8,["onChange","value","err"])]),e("div",be,[n(f,{onChange:i.handleChange,label:"Contact",type:"text",name:"contact",placeholder:"Votre contact",value:t.contact,err:t.errors.contact},null,8,["onChange","value","err"]),n(f,{onChange:i.handleChange,label:"WhatsApp",type:"text",name:"whatsApp",placeholder:"Votre WhatsApp",value:t.whatsApp,err:t.errors.whatsapp},null,8,["onChange","value","err"])]),e("div",Be,[n(j,{onChange:i.handleChange,name:"town",label:"Ville",value:t.town,placeholder:"Choisir la ville",err:t.errors.town},{default:_(()=>[(r(!0),a(b,null,D(t.locations,m=>(r(),a("option",{value:m.name,key:m.name},h(m.name),9,ke))),128))]),_:1},8,["onChange","value","err"]),n(f,{onChange:i.handleChange,label:"Addresse précise",type:"text",name:"address",placeholder:"Votre Addresse Exacte",value:t.address,err:t.errors.address},null,8,["onChange","value","err"])]),e("div",Ie,[je,e("div",Ae,[e("button",{type:"button",onClick:o[0]||(o[0]=()=>i.chooseShopType("Basic")),class:p(`p-1.5 h-fit hover:shadow-lg hover:shadow-green-300 border-2 border-green-500 font-semibold rounded ${t.currentButton==="Basic"?"bg-green-500 text-white":"text-green-500 bg-white"}`)},[t.currentButton==="Basic"?(r(),a("span",Se,[Le,n(u,{class:"h-6 w-6 ml-2"})])):(r(),a("span",Pe,"Basic"))],2),e("button",{type:"button",onClick:o[1]||(o[1]=()=>i.chooseShopType("Standard")),class:p(`p-1.5 h-fit hover:shadow-lg hover:shadow-blue-300 border-2 border-blue-700 font-semibold rounded transition-colors duration-500 ${t.currentButton==="Standard"?"bg-blue-700 text-white":"text-blue-700 bg-white"}`)},[t.currentButton==="Standard"?(r(),a("span",Ve,[Te,n(u,{class:"h-6 w-6 ml-2"})])):(r(),a("span",Re,"Standard"))],2),e("button",{type:"button",onClick:o[2]||(o[2]=()=>i.chooseShopType("Business")),class:p(`p-1.5 h-fit hover:shadow-lg hover:shadow-orange-300 border-2 border-orange-500 font-semibold rounded transition-colors duration-500 ${t.currentButton==="Business"?"bg-orange-500 text-white":"text-orange-500 bg-white"}`)},[t.currentButton==="Business"?(r(),a("span",De,[Ne,n(u,{class:"h-6 w-6 ml-2"})])):(r(),a("span",ze,"Business"))],2),e("button",{type:"button",onClick:o[3]||(o[3]=()=>i.chooseShopType("Premium")),class:p(`p-1.5 h-fit hover:shadow-lg hover:shadow-gray-300 border-2 border-gray-500 font-semibold rounded transition-colors duration-500 ${t.currentButton==="Premium"?"bg-gray-500 text-white":"text-gray-500 bg-white"}`)},[t.currentButton==="Premium"?(r(),a("span",Ge,[He,n(u,{class:"h-6 w-6 ml-2"})])):(r(),a("span",Me,"Premium"))],2)]),e("input",{hidden:"",ref:"input",type:"file",name:"file",onChange:o[4]||(o[4]=(...m)=>i.loadImage&&i.loadImage(...m))},null,544)]),e("div",Ee,[n(A,{class:"w-4 mr-1"}),n(C,{text:"Mettre la catégorisation en jours",path:"/admin/shops/"+t.id+"/update/categories",variant:"default"},null,8,["path"])])]),e("p",Ue,[Fe,n(x,{to:"/term-of-use"},{default:_(()=>[We]),_:1}),qe]),e("div",Oe,[n(C,{text:"Voir les shops",path:"/admin/shops",variant:"default"}),n(S,{text:"Enregistrer",variant:"bg",design:"primary",onClick:i.onPressUpdate},null,8,["onClick"])])]),e("div",Je,[e("div",Ke,[t.image?(r(),a("div",Ze,[e("img",{src:t.image,class:"h-full w-full object-cover",alt:"Company logo"},null,8,$e)])):(r(),a("div",Qe,[n(w,{class:"h-16 cursor-pointer w-16 text-gray-500"}),Xe,e("span",Ye,h(t.errors.image),1)])),e("div",et,[n(y,{onClick:i.handleLoadImage,class:"h-8 hover:text-gray-400 w-8 text-gray-500"},null,8,["onClick"])])]),t.image?(r(),a("span",tt,h(t.errors.image),1)):v("",!0)])]))])],64)}const wt=P(K,[["render",st]]);export{wt as default};
