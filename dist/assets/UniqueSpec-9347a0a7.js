import{T as D}from"./TextBox-7a965e88.js";import{g as s,c as l,b as e,r as n,o as H,a as r,d as i,t as d,F as $,i as z,u as _,v as G,q as E,z as J,B as N}from"./index-4f0251ba.js";import{r as K}from"./PencilIcon-abb9d0b0.js";import{r as Q}from"./PlusIcon-bdc15d1c.js";import{r as j}from"./XMarkIcon-ae1ed58b.js";import{P as W}from"./PagesNavigationHeader-c8c7004e.js";import{S as w}from"./spec-4e36dad5.js";import{S as X}from"./SuccessComponent-d31b415f.js";import"./ArrowLeftIcon-5af96ac5.js";function Y(I,f){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M4.5 12a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm6 0a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm6 0a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z","clip-rule":"evenodd"})])}const Z={class:"w-full h-full grid place-items-center"},ee={class:"md:w-full w-11/12 md:h-[70%] flex h-auto justify-center items-center"},te={key:0,class:"border md:w-11/12 md:mb-5 md:space-x-5 mb-3 h-full bg-white __shad shadow-gray-200 flex rounded md:p-8 p-3 justify-between items-center flex-col md:flex-row"},se={class:"md:w-6/12 flex flex-col w-full justify-between h-full"},ae={class:"h-40 my-auto w-fit border p-3 rounded flex flex-col justify-between"},le=e("span",{class:"font-semibold"},"Catégorie :",-1),oe=e("span",{class:"font-semibold"},"Extension :",-1),ne=e("span",{class:"font-semibold"},"Type :",-1),ie=e("span",{class:"font-semibold"},"Spécification :",-1),re={key:0,"data-aos":"fade-in","data-aos-duration":"1000",class:"md:w-6/12 w-full md:ml-2 mb-3 h-full"},ue={class:"w-full p-1 flex justify-between"},ce=e("span",null,"Les détails...",-1),de=i(),fe={key:0,class:"flex flex-wrap"},me={id:"wrapper",class:"px-1.5 py-0.5 relative items-center justify-between flex my-1 text-blue-500 rounded-full border-2 border-blue-500 mr-2"},pe=["onClick"],ve={key:0,class:"w-8 absolute justify-center z-50 bg-white flex flex-col items-center right-0 shadow top-8 rounded"},he=["onClick"],_e=["onClick"],be={key:1,class:"grid place-items-center h-60"},we={key:1,"data-aos":"fade-in","data-aos-duration":"1000",class:"md:w-6/12 h-full"},ge={class:"w-full justify-between flex"},ye=e("span",null,"Ajouter des details",-1),xe=i(),ke=e("p",{class:"text-gray-600 mb-3 text-sm"},"Remplissez le champ ci-bas pour ajouter des (...) à cette spécification.",-1),Ce={class:"w-full border rounded p-1 min-h-[60px] flex flex-wrap"},je={class:"w-full flex flex-col"},Se={class:"flex justify-between items-center space-x-3"},Be={class:"w-full flex mt-3 justify-between"},De={key:1,class:"border md:w-6/12 md:mb-5 relative mb-3 h-auto bg-white __shad shadow-gray-200 flex rounded p-8 justify-between items-center flex-col md:flex-row"},$e={key:0,class:"w-full text-gray-700 h-40"},ze={class:"mt-5 text-center"},Ee=i("Voulez-vous vraiment supprimer le detail "),Ne=i(" de la specification "),Ie=i(" ? Cette operation est irreversible !"),Ve={class:"flex justify-between mx-auto md:w-1/2 w-9/12 mt-5"},Ae={key:1,class:"w-full h-auto p-3"},Le={class:"text-gray-600"},Oe=i("Modification d'un detail de la specification "),Me=e("br",null,null,-1),Pe={key:2,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"},Qe={__name:"UniqueSpec",setup(I){const f=n({}),p=n(""),u=n([]);n(0);const g=n([]),v=n({}),m=n({}),S=n(!1),y=n(!0),h=n(!1),c=n(!1),x=n(0),k=n(!1),b=J();async function V(t){p.value=t.target.value}function A(t){x.value=t.id,h.value=!h.value}async function L(){if(u.value.length==0&&p.value=="")f.value.name="Veillez renseigner le champs au moins une fois";else{const t=await w.createDetail({id:b.params.specId,data:u.value});t.type==="success"?(S.value=!0,f.value={}):t.type==="error"&&(f.value=t.data)}}function O(){p.value!=""&&!u.value.includes(p.value.toLowerCase())&&(u.value.push(p.value),p.value="")}function M(t){u.value=u.value.filter(a=>a!=t)}async function P(t){const a=await w.get(t);a.type==="success"&&(v.value=a.data)}async function C(t){const a=await w.getDetailsBySpec(t);a.type==="success"&&(g.value=a.data)}async function R(){(await w.deleteDetail(m.value.id)).type==="success"&&C(b.params.specId).then(()=>{c.value=!1,h.value=!1})}function T(t){k.value=!0,c.value=!0,m.value=t}function q(t){k.value=!1,c.value=!0,m.value=t,x.value=t.id}function F(t){m.value.name=t.target.value}async function U(){if(m.value.name.length>2){const t=await w.updateDetail(m.value);t.type==="success"?C(b.params.specId).then(()=>{c.value=!1,h.value=!1}):f.value=t.data}else f.value.detail="Le nom doit avoir au minimum 3 lettres"}return H(()=>{P(b.params.specId),C(b.params.specId)}),(t,a)=>(s(),l("div",Z,[e("div",ee,[!S.value&&!c.value?(s(),l("div",te,[e("div",se,[r(W,{title:"Information sur une spécification"}),e("div",ae,[e("div",null,[le,i(" "+d(v.value.cat_name),1)]),e("div",null,[oe,i(" "+d(v.value.ext_name),1)]),e("div",null,[ne,i(" "+d(v.value.typ_name),1)]),e("div",null,[ie,i(" "+d(v.value.spe_name),1)])])]),y.value?(s(),l("div",re,[e("div",ue,[ce,de,e("span",{onClick:a[0]||(a[0]=o=>y.value=!1),class:"rounded cursor-pointer hover:bg-gray-300 bg-gray-200 font-semibold h-fit p-1"},"Ajouter")]),g.value.length>0?(s(),l("div",fe,[(s(!0),l($,null,z(g.value,o=>(s(),l("div",me,[i(d(o.name)+" ",1),e("span",{id:"close",onClick:()=>A(o),class:"bg-blue-200 rounded-full ml-2 cursor-pointer"},[r(_(Y),{class:"w-5 h-5"})],8,pe),h.value&&o.id==x.value?(s(),l("div",ve,[e("span",{onClick:B=>T(o),class:"w-8 h-8 cursor-pointer hover:bg-gray-200 grid place-items-center p-0.5"},[r(_(j),{class:"w-6 h-6"})],8,he),e("span",{onClick:B=>q(o),class:"w-8 h-8 p-0.5 cursor-pointer hover:bg-gray-200 grid place-items-center overflow-hidden"},[r(_(K),{class:"w-5 h-5"})],8,_e)])):E("",!0)]))),256))])):(s(),l("div",be," Aucun detail à afficher pour le moment ! "))])):(s(),l("div",we,[e("div",ge,[ye,xe,e("span",{onClick:a[1]||(a[1]=o=>y.value=!0),class:"rounded cursor-pointer hover:bg-gray-300 bg-gray-200 font-semibold p-1"},"Afficher")]),ke,e("div",Ce,[(s(!0),l($,null,z(u.value,o=>(s(),l("div",{class:"flex justify-between items-center mr-3 my-1 h-fit rounded-full p-1.5 text-sm w-fit bg-gray-100",key:u.value.indexOf(o)},[i(d(o),1),r(_(j),{onClick:B=>M(o),class:"h-5 ml-2 cursor-pointer w-5 text-gray-500"},null,8,["onClick"])]))),128))]),e("form",je,[e("div",Se,[r(D,{onChange:V,type:"text",name:"name",label:"Nom du type",value:p.value,placeholder:"Nom du type",err:f.value.name},null,8,["value","err"]),e("button",{onClick:O,type:"button",class:"w-10 h-10 rounded mt-6 grid place-items-center bg-white border-2 border-blue-500"},[r(_(Q),{class:"text-blue-500 h-7 w-7"})])])]),e("div",Be,[u.value.length>0?(s(),G(N,{key:0,text:"Enregistrer",variant:"bg",design:"primary",onClick:L})):E("",!0)])]))])):c.value?(s(),l("div",De,[e("span",{onClick:a[2]||(a[2]=o=>(c.value=!1,h.value=!1)),class:"absolute right-2 top-2 cursor-pointer bg-gray-200 p-1 rounded"},[r(_(j),{class:"w-6 h-6"})]),k.value?(s(),l("div",$e,[e("p",ze,[Ee,e("b",null,d(m.value.name),1),Ne,e("b",null,d(v.value.spe_name),1),Ie]),e("div",Ve,[e("button",{onClick:R,class:"p-1 rounded border-2 border-blue-500 text-blue-600 bg-white"},"Confirmer"),e("button",{onClick:a[3]||(a[3]=o=>{c.value=!1,c.value=!1,h.value=!1}),class:"p-1 rounded bg-blue-600 text-white"},"Annuler")])])):(s(),l("div",Ae,[e("p",Le,[Oe,e("b",null,d(v.value.spe_name),1)]),r(D,{onChange:F,label:"Nom du detail",type:"detail",name:"detail",placeholder:"Nom du detail",value:m.value.name,err:f.value.contact},null,8,["value","err"]),Me,r(N,{text:"Enregistrer la modification",variant:"bg",design:"primary",onClick:U})]))])):(s(),l("div",Pe,[r(X,{path:"/admin/specifications/all",title:"Enregitrement effectué !",message:"La spécification a été enregistrée avec succès. Elle est est maintenant utilisable partout. Vous pouvez la modifier mais pas le supprimer définitivément."})]))])]))}};export{Qe as default};
