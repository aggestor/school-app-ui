import{T as _}from"./TextBox-7a965e88.js";import{B as w}from"./ButtonLink-43715362.js";import{_ as x,B as b,e as m,s as v,c as d,a,b as t,w as C,F as y,f as r,g as c,d as I}from"./index-4f0251ba.js";import{R as j}from"./ReusableHeader-d460a56a.js";import{r as k}from"./CheckCircleIcon-fc1bb9cf.js";import{r as B}from"./PlusCircleIcon-d060796b.js";import{u as S}from"./useVerify-b9fe02ca.js";import{S as P}from"./SuccessComponent-d31b415f.js";import"./XMarkIcon-ae1ed58b.js";const R={components:{TextBox:_,ButtonLink:w,Button:b,CheckCircleIcon:k,ReusableHeader:j,PlusCircleIcon:B,SuccessComponent:P},data(){return{name:"",email:"",phone:"",password:"",address:"",showSuccessPanel:!1,secondAddr:"",errors:{},id:"",oldImage:"",imageFile:null,image:"/images/placeholder.jpg"}},setup(){S()},mounted(){const s=JSON.parse(localStorage.getItem("logged_in_user"));let e="";s?e=s.data.id:e=this.$route.params.id,console.log(e),this.getUser(e)},methods:{handleChange(s){const e=s.target.name;this[e]=s.target.value},handleChooseImage(s){this.image=URL.createObjectURL(s.target.files[0]),this.imageFile=s.target.files[0]},async continueAction(){this.$router.push("/owner/profile")},async onPressRegister(){const s={name:this.name,email:this.email,phone:this.phone,address:this.address,id:this.id,image:this.imageFile,oldImage:this.oldImage},e=await m.update(s);e.type==="success"&&(this.showSuccessPanel=!0),e.type==="error"&&(this.errors=e.data)},chooseImage(){this.$refs.profile_pic.click()},async getUser(s){const e=await m.getUser(s);e.type==="success"&&(this.name=e.data.name,this.user=e.data,this.email=e.data.email,this.phone=e.data.mobile,this.address=e.data.address,this.id=e.data.id,e.data.picture!=="/placeholder.jpg"&&(this.oldImage=e.data.picture,this.image=v+"/users/"+e.data.picture))}}},V={class:"w-11/12 mx-auto flex justify-center items-center h-[500px]"},T={key:0,class:"md:w-7/12 w-11/12 h-auto border rounded md:h-80"},U={key:1,"data-aos":"slide-up","data-aos-duration":"500",class:"md:w-10/12 w-full flex justify-between items-center h-[80%] bg-white rounded-lg border"},F={class:"md:w-7/12 flex h-[80%] md:p-6 p-4 justify-center flex-col"},L=t("h1",{class:"font-semibold text-2xl text-blue-600 mb-3"},"Modifier votre compte",-1),N={class:"h-full w-full flex flex-col"},E={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},M={class:"w-full flex md:space-x-1 flex-col md:flex-row justify-between"},A={class:"md:w-9/12"},H=I(" Modifier votre mot de passe "),O={class:"w-full items-center my-3 flex justify-between"},q={class:"w-5/12 md:flex hidden items-center justify-center h-full"},J={class:"w-44 h-44 border relative grid place-items-center rounded-full"},z=["src"];function D(s,e,G,K,l,o){const h=r("ReusableHeader"),u=r("SuccessComponent"),n=r("TextBox"),p=r("router-link"),f=r("Button"),g=r("PlusCircleIcon");return c(),d(y,null,[a(h,{title:"Modifier votre compte"}),t("div",V,[l.showSuccessPanel?(c(),d("div",T,[a(u,{title:"Modification effectuee",message:"La modification de votre a ete effectuee. Les nouvelles informations sont maintenant visible publiquement.",path:"/owner/profile"})])):(c(),d("div",U,[t("div",F,[L,t("form",N,[t("div",E,[a(n,{onChange:o.handleChange,label:"Nom",type:"text",name:"name",placeholder:"Votre nom",value:this.name,err:l.errors.name},null,8,["onChange","value","err"])]),t("div",M,[a(n,{onChange:o.handleChange,label:"Email",type:"email",name:"email",placeholder:"Votre Email",value:this.email,err:l.errors.email},null,8,["onChange","value","err"]),a(n,{onChange:o.handleChange,label:"Téléphone",type:"tel",name:"phone",placeholder:"Votre numéro de téléphone",value:this.phone,err:l.errors.phone},null,8,["onChange","value","err"])]),t("div",A,[a(n,{onChange:o.handleChange,label:"Addresse",name:"address",type:"text",placeholder:"Votre premiere addresse",value:this.address},null,8,["onChange","value"])]),t("div",null,[a(p,{class:"text-blue-600 underline",to:"/owner/update/password"},{default:C(()=>[H]),_:1})]),t("input",{onChange:e[0]||(e[0]=(...i)=>o.handleChooseImage&&o.handleChooseImage(...i)),type:"file",hidden:"",accept:"image/jpeg,image/png",ref:"profile_pic"},null,544)]),t("div",O,[a(f,{text:"Enregistrer les modifications",variant:"bg",design:"primary",onClick:o.onPressRegister},null,8,["onClick"])])]),t("div",q,[t("div",J,[t("img",{src:l.image,class:"w-full h-full rounded-full object-cover"},null,8,z),t("span",{onClick:e[1]||(e[1]=(...i)=>o.chooseImage&&o.chooseImage(...i)),class:"w-7 h-7 bg-blue-600 hover:bg-blue-700 hover:shadow-lg transition-colors duration-500 hover:shadow-blue-300 text-white grid place-items-center rounded cursor-pointer absolute left-[70px] -bottom-3"},[a(g,{class:"w-5 h-5"})])])])]))])],64)}const oe=x(R,[["render",D]]);export{oe as default};
