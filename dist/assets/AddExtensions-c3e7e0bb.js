import{T as h}from"./TextBox-7a965e88.js";import{r as t,o as y,c as o,a as r,b as c,w as _,g as n,F as x,i as b,t as w,B as C}from"./index-4f0251ba.js";import{C as B}from"./category-855ddfae.js";import{P as E}from"./PagesNavigationHeader-c8c7004e.js";import{E as k}from"./extension-6b58ca39.js";import{S as j}from"./SuccessComponent-d31b415f.js";import{D as A}from"./Datalist-67627a9c.js";import{u as N}from"./useVerify-b9fe02ca.js";import"./ArrowLeftIcon-5af96ac5.js";import"./XMarkIcon-ae1ed58b.js";const V={class:"w-full md:h-[90%] flex justify-center items-center"},S={key:0,class:"md:w-5/12 border w-11/12 md:mb-5 mb-3 mt-10 bg-white __shad shadow-gray-200 flex h-auto rounded p-8 justify-center flex-col"},D=c("p",{class:"text-gray-600 mb-3 text-sm"},"Remplissez le champ ci-bas pour enregister une nouvelle extension.",-1),L={class:"h-full w-full flex flex-col"},P=["value"],z={class:"w-full flex mt-3 justify-between"},F={key:1,class:"md:w-7/12 border w-[95%] md:mb-5 mb-3 mt-10 md:h-80 bg-white __shad shadow-gray-200 flex rounded justify-center flex-col"},U={__name:"AddExtensions",setup(I){N();const l=t({}),i=t(""),m=t(""),d=t(!1),u=t([]),f=t();async function p(e){if(e.target.name=="title")i.value=e.target.value;else if(e.target.name=="category"){const a=u.value.filter(s=>s.name==e.target.value);console.log(a),a[0]&&(f.value=a[0].id,m.value=a[0].name)}}async function g(){const e=await k.create({title:i.value,category:f.value});e.type==="error"?l.value=e.data:e.type=="success"&&(l.value={},d.value=!0)}async function v(){const e=await B.getAll();u.value=Array.isArray(e.data)?e.data:[e.data]}return y(v),(e,a)=>(n(),o("div",V,[d.value?(n(),o("div",F,[r(j,{path:"/admin/extensions",title:"Enregitrement effectué !",message:"L'extension a été enregistrée avec succès. Elle est maintenant utilisable partout. Vous pouvez la modifier mais pas la supprimer définitivément."})])):(n(),o("div",S,[r(E,{title:"Ajouter  une extension"}),D,c("form",L,[r(h,{onChange:p,type:"text",name:"title",label:"Nom de l'extension",value:i.value,placeholder:"Nom de l'extension",err:l.value.title},null,8,["value","err"]),r(A,{onChange:p,name:"category",label:"Ville",value:m.value,placeholder:"Choisir la catégorie",err:l.value.category},{default:_(()=>[(n(!0),o(x,null,b(u.value,s=>(n(),o("option",{value:s.name,key:s.name},w(s.name),9,P))),128))]),_:1},8,["value","err"])]),c("div",z,[r(C,{text:"Enregistrer",variant:"bg",design:"primary",onClick:g})])]))]))}};export{U as default};
