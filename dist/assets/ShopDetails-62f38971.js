import{r as _,o as M,c as l,b as s,a,w as p,u as c,t as n,d as u,F as N,i as S,H as b,q,j as y,e as F,z as C,f as T,g as o,O as z,s as L,P,n as E}from"./index-4f0251ba.js";import{r as W}from"./FaceFrownIcon-82098295.js";import{r as H}from"./LinkIcon-3dcb2223.js";import{r as w}from"./PlusCircleIcon-d060796b.js";import{r as R}from"./EyeIcon-c90102af.js";import{r as U}from"./LockClosedIcon-b61b0585.js";import{r as G}from"./LockOpenIcon-9e251320.js";import{r as V}from"./PencilIcon-abb9d0b0.js";import{S as g}from"./shop-37c8544f.js";import{P as I}from"./product-f3166d18.js";import{B as J}from"./branch-689a9ce0.js";import{u as K}from"./useVerify-b9fe02ca.js";import{a as O}from"./format-date-ae167d6c.js";const Q={class:"w-full h-full flex justify-center items-center"},X={class:"h-[95%] md:space-x-4 space-y-4 md:space-y-0 w-[97%] grid md:grid-cols-2 grid-cols-1"},Y={class:"col-span-1 h-full space-y-4 grid grid-cols-1"},Z={key:0,class:"h-[350px] p-3 col-span-1 bg-white"},ss={class:"flex items-center justify-between"},es=s("div",{class:"animate-pulse flex items-center"},[s("span",{class:"w-8 h-8 bg-gray-200 rounded"}),s("span",{class:"ml-3 font-semibold w-80 h-6 bg-gray-200 rounded"})],-1),ts=s("span",{class:"rounded flex items-center w-16 h-8 bg-gray-100 p-1"},null,-1),as=y('<div class="w-full pt-2 h-full flex justify-between"><div class="w-1/3"><div class="w-32 h-32 bg-gray-200 animate-pulse overflow-hidden rounded"></div></div><div class="w-2/3 flex animate-pulse flex-col"><span class="flex mb-2 justify-between w-full items-center"><span class="h-5 bg-gray-200 rounded w-[50px]"></span><span class="w-[120px] h-5 bg-gray-200 rounded"></span></span><span class="flex mb-2 justify-between w-full items-center"><span class="h-5 bg-gray-200 rounded w-[80px]"></span> <span class="w-[120px] h-5 bg-gray-200 rounded"></span></span><span class="flex mb-2 justify-between w-full items-center"><span class="h-5 bg-gray-200 rounded w-[30px]"></span><span class="w-[70px] h-5 bg-gray-200 rounded"></span></span><span class="flex mb-2 justify-between w-full items-center"><span class="h-5 bg-gray-200 rounded w-[60px]"></span><span class="w-[170px] h-5 bg-gray-200 rounded"></span></span><span class="flex mb-2 justify-between w-full items-center"><span class="h-5 bg-gray-200 rounded w-[49px]"></span><span class="w-[70px] h-5 bg-gray-200 rounded"></span></span><span class="flex mb-2 justify-between w-full items-center"><span class="h-5 bg-gray-200 rounded w-[80px]"></span><span class="w-[200px] h-5 bg-gray-200 rounded"></span></span><span class="flex mb-2 justify-between w-full items-center"><span class="h-5 bg-gray-200 rounded w-[45px]"></span><span class="w-[20px] h-5 bg-gray-200 rounded"></span></span><span class="flex mb-2 justify-between w-full items-center"><span class="h-5 bg-gray-200 rounded w-[50px]"></span> <span class="w-[70px] h-5 bg-gray-200 rounded"></span></span></div></div>',1),ns={key:1,class:"md:h-[350px] h-auto p-3 col-span-1 bg-white"},ls={class:"flex items-center justify-between"},os={class:"flex items-center"},cs={class:"ml-3 text-xl font-semibold text-gray-800"},is={class:"flex space-x-1 items-center"},ds=s("span",{class:"hidden md:flex"},"Bloquer",-1),rs=s("span",{class:"hidden md:flex"},"Debloquer",-1),us=u(),ps={class:"rounded flex items-center bg-gray-800 p-1 text-white"},fs=s("span",{class:"hidden md:flex"},"Modifier",-1),hs=u(),_s={class:"w-full pt-2 h-auto flex md:flex-row flex-col justify-between"},ms={class:"md:w-1/3 mb-2 md:mb-0 w-full"},xs={class:"md:w-32 md:h-32 w-full h-60 overflow-hidden rounded"},ws=["src","alt"],bs={class:"md:w-2/3 w-full flex flex-col"},gs={class:"flex mb-2 justify-between w-full items-center"},ys=s("span",{class:"text-gray-800 font-semibold"},"Phone",-1),vs=["href"],js={class:"hover:text-blue-600"},ks={class:"flex mb-2 justify-between w-full items-center"},$s=s("span",{class:"text-gray-800 font-semibold"},"WhatsApp",-1),As={class:"flex mb-2 justify-between w-full items-center"},Ns=s("span",{class:"text-gray-800 font-semibold"},"Ville",-1),Ss={class:"flex mb-2 justify-between w-full items-center"},Cs=s("span",{class:"text-gray-800 font-semibold"},"Location",-1),Ls={class:"flex mb-2 justify-between w-full items-center"},Ps=s("span",{class:"text-gray-800 font-semibold"},"Niveau",-1),Vs={class:"flex mb-2 justify-between w-full items-center"},Os=s("span",{class:"text-gray-800 font-semibold"},"Categories",-1),Bs=u(),Ds={class:"text-end w-2/3 overflow-hidden text-ellipsis"},Ms={class:"flex mb-2 justify-between w-full items-center"},qs=s("span",{class:"text-gray-800 font-semibold"},"Status",-1),Fs={key:0,class:"px-1 text-sm rounded-full text-white bg-green-600"},Ts={key:1,class:"px-1 text-sm rounded-full text-white bg-red-600"},zs={class:"flex mb-2 justify-between w-full items-center"},Es=s("span",{class:"text-gray-800 font-semibold"},"Verifiée ?",-1),Ws={key:0,class:"px-1 text-sm rounded-full text-white bg-green-600"},Hs={key:1,class:"px-1 text-sm rounded-full text-white bg-red-600"},Rs={class:"flex mb-2 justify-between w-full items-center"},Us=s("span",{class:"text-gray-800 font-semibold"},"Modif.",-1),Gs={class:"h-[250px] flex items-center justify-center col-span-1 bg-white"},Is={key:0},Js={key:1,class:"h-full p-2 w-full"},Ks={class:"flex h-fit pb-1 w-full items-center justify-between"},Qs=s("div",{class:"flex items-center"},[s("span",{class:"text-xl font-semibold text-gray-800"},"Liste de vos branches")],-1),Xs={class:"flex"},Ys={class:"rounded flex mr-1 items-center bg-gray-800 p-1 text-white"},Zs={class:"rounded flex items-center bg-gray-800 p-1 text-white"},se={class:"h-[85%] text-sm w-full"},ee=y('<div class="p-2 w-full mb-1 border-b flex text-gray-600"><span class="w-fit px-1">#</span><span class="md:w-3/12 w-5/12 font-semibold flex text-center px-1">Nom</span><span class="w-3/12 hidden md:flex text-center px-1">WhatsApp</span><span class="w-2/12 flex text-center px-1">Ville</span><span class="w-4/12 md:w-3/12 flex text-center px-1">Modif.</span><span class="w-1/12 flex text-center px-1">--</span></div>',1),te={class:"w-fit px-1"},ae={class:"md:w-3/12 w-5/12 font-semibold px-1"},ne={class:"md:w-3/12 w-4/12 hidden md:flex text-center px-1"},le={class:"w-2/12 flex text-center px-1"},oe={class:"md:w-3/12 w-4/12 flex text-center px-1"},ce={class:"w-1/12 flex text-center px-1"},ie={class:"w-6 h-6 text-white grid place-items-center rounded bg-blue-600"},de={key:2,class:"flex h-fit justify-center items-center flex-col w-fit"},re=s("span",{class:"my-3 w-72 text-sm"},"Ce shop n'a aucune branche pour le moment !",-1),ue={class:"bg-gray-800 cursor-pointer px-1 py-1 w-fit text-white flex items-center justify-around rounded"},pe=u("Créer une branche "),fe={class:"col-span-1 p-2 h-full bg-white"},he={key:0,class:"w-full flex items-center justify-between h-40 border-b"},_e={class:"w-32 h-32 rounded"},me=["src"],xe={class:"w-[72%] ml-2 h-32"},we={class:"flex mb-2 justify-between w-full items-center"},be=s("span",{class:"text-gray-800 font-semibold"},"Propriétaire",-1),ge={class:"flex mb-2 justify-between w-full items-center"},ye=s("span",{class:"text-gray-800 font-semibold"},"Email",-1),ve={class:"flex mb-2 justify-between w-full items-center"},je=s("span",{class:"text-gray-800 font-semibold"},"Téléphone",-1),ke={class:"flex mb-2 justify-between w-full items-center"},$e=s("span",{class:"text-gray-800 font-semibold"},"Actif(ve)",-1),Ae=u(),Ne={class:"w-full"},Se={class:"flex h-fit py-3 w-full items-center justify-between"},Ce=s("div",{class:"flex items-center"},[s("span",{class:"text-xl font-semibold text-gray-800"},"12 derniers produits")],-1),Le={class:"flex"},Pe={class:"rounded flex mr-1 items-center bg-gray-800 p-1 text-white"},Ve={class:"rounded flex items-center bg-gray-800 p-1 text-white"},Oe={class:"h-[400px] flex flex-col justify-center w-full"},Be={key:0,class:"w-8/12 h-fit mx-auto text-gray-600 flex flex-col justify-center items-center"},De={class:"text-sm text-center"},Me={class:"bg-gray-800 cursor-pointer mt-2 px-1 py-1 w-fit text-white flex items-center justify-around rounded"},qe=u("Ajouter des produits "),Fe={key:1,class:"w-full h-full flex justify-center items-center"},Te={key:2,class:"w-full text-sm h-full"},ze=y('<div class="w-full mb-3 border-b pb-1 space-x-1 flex"><span class="w-1/12">#</span><span class="w-7/12">Nom</span><span class="w-2/12">Prix</span><span class="w-2/12 text-center">--</span></div>',1),Ee={class:"w-1/12 p-1"},We={class:"w-7/12 font-semibold"},He={class:"w-2/12 font-semibold text-blue-600"},Re={class:"w-2/12 flex items-center justify-center"},Ue={class:"w-6 h-6 bg-blue-600 mr-1 rounded text-white grid place-items-center"},Ge={class:"w-6 h-6 bg-gray-700 rounded text-white grid place-items-center"},ct={__name:"ShopDetails",setup(Ie){K();const t=_({}),f=_({}),h=_([]),m=_([]),v=_(!0),j=_(!0),x=_(!0),B=async()=>{const r=C();if(r){const i=r.params.user==0?await Promise.all([g.get(r.params.id)]):await Promise.all([g.get(r.params.id),F.getUser(r.params.user)]);if(Array.isArray(i))return i}},k=async r=>{(await g.changeStatus({status:r,id:t.value.id})).type==="success"&&(t.value.status=r)},D=async r=>{x.value=!0;const i=await I.getByShopLimited(`${r}-12`);i.type==="success"&&i.data!==!1&&(m.value=i.data),x.value=!1};return M(async()=>{const r=C(),[i,d]=await B();d&&d.type==="success"&&(f.value=d.data),i&&i.type==="success"&&(t.value=i.data,v.value=!1);const e=await J.getForShop(r.params.id);e.type==="success"&&(Array.isArray(e.data)?h.value=e.data:e.data===!1?h.value=void 0:h.value.push(e.data)),j.value=!1,D(r.params.id)}),(r,i)=>{const d=T("router-link");return o(),l("section",Q,[s("div",X,[s("div",Y,[v.value?(o(),l("div",Z,[s("div",ss,[es,a(d,{to:"/admin/shops/update/"+t.value.id},{default:p(()=>[ts]),_:1},8,["to"])]),as])):(o(),l("div",ns,[s("div",ls,[s("div",os,[a(c(z),{class:"w-8 h-8 text-gray-600"}),s("span",cs,n(t.value.name),1)]),s("div",is,[t.value.status==1?(o(),l("span",{key:0,onClick:i[0]||(i[0]=e=>k(0)),class:"rounded flex items-center cursor-pointer text-white hover:bg-red-700 bg-red-600 p-1"},[ds,a(c(U),{class:"md:ml-1 md:h-4 md:w-4 w-5 h-5"})])):(o(),l("span",{key:1,onClick:i[1]||(i[1]=e=>k(1)),class:"rounded flex items-center text-white hover:bg-green-700 cursor-pointer bg-green-600 p-1"},[rs,us,a(c(G),{class:"md:ml-1 md:h-4 md:w-4 w-5 h-5"})])),a(d,{to:"/admin/shops/"+t.value.id+"/update"},{default:p(()=>[s("span",ps,[fs,hs,a(c(V),{class:"md:ml-1 md:h-4 md:w-4 w-5 h-5"})])]),_:1},8,["to"])])]),s("div",_s,[s("div",ms,[s("div",xs,[s("img",{src:c(L)+"/shops/"+t.value.logo,class:"w-full h-full object-cover",alt:t.value.name+"' logo"},null,8,ws)])]),s("div",bs,[s("span",gs,[ys,s("a",{href:"tel:"+t.value.contact},[s("span",js,n(t.value.contact),1)],8,vs)]),s("span",ks,[$s,u(" "+n(t.value.contact),1)]),s("span",As,[Ns,u(" "+n(t.value.location_name),1)]),s("span",Ss,[Cs,u(" "+n(t.value.full_address||"Non définie"),1)]),s("span",Ls,[Ps,u(" "+n(t.value.level),1)]),s("span",Vs,[Os,Bs,s("span",Ds,n(t.value.categories.replace(/\$/gi,", ")),1)]),s("span",Ms,[qs,t.value.status==1?(o(),l("span",Fs,"Activée")):(o(),l("span",Ts,"Desactivée"))]),s("span",zs,[Es,t.value.verified==1?(o(),l("span",Ws,"Oui")):(o(),l("span",Hs,"Non"))]),s("span",Rs,[Us,u(" "+n(c(O)(t.value.last_update)),1)])])])])),s("div",Gs,[j.value===!0?(o(),l("div",Is," Loading.. ")):Array.isArray(h.value)&&h.value.length>0?(o(),l("div",Js,[s("div",Ks,[Qs,s("div",Xs,[a(d,{to:"/admin/shops/"+t.value.id+"/branches"},{default:p(()=>[s("span",Ys,[a(c(P),{class:"h-5 w-5"})])]),_:1},8,["to"]),a(d,{to:"/admin/shops/"+t.value.id+"/branches/new"},{default:p(()=>[s("span",Zs,[a(c(w),{class:"h-5 w-5"})])]),_:1},8,["to"])])]),s("div",se,[ee,(o(!0),l(N,null,S(h.value,e=>(o(),l("div",{key:e.id,class:b(`${h.value.indexOf(e)%2===0?"":"bg-gray-200"} p-2 w-full  flex hover:bg-blue-100 text-gray-600`)},[s("span",te,n(h.value.indexOf(e)+1),1),s("span",ae,n(e.name),1),s("span",ne,n(e.contact_whatsapp),1),s("span",le,n(e.location),1),s("span",oe,n(c(O)(e.last_update)),1),s("span",ce,[a(d,{to:"/admin/shops/"+t.value.id+"/branches/"+e.id},{default:p(()=>[s("span",ie,[a(c(H),{class:"w-4 h-4"})])]),_:2},1032,["to"])])],2))),128))])])):(o(),l("div",de,[a(c(E),{class:"h-16 w-16 text-gray-600"}),re,a(d,{to:"/admin/shops/"+t.value.id+"/branches/new"},{default:p(()=>[s("span",ue,[pe,a(c(w),{class:"ml-2 h-5 w-5"})])]),_:1},8,["to"])]))])]),s("div",fe,[f.value.last_update?(o(),l("div",he,[s("div",_e,[s("img",{class:"w-full h-full object-cover",src:f.value.picture!=="placeholder.jpg"?c(L)+"/users/"+f.value.picture:"/images/placeholder.jpg",alt:"user's image"},null,8,me)]),s("div",xe,[s("span",we,[be,u(" "+n(f.value.name),1)]),s("span",ge,[ye,u(" "+n(f.value.email),1)]),s("span",ve,[je,u(" "+n(f.value.mobile),1)]),s("span",ke,[$e,Ae,s("span",{class:b(`font-semibold rounded-full px-1 py-0.5 text-white ${f.value.is_active=="1"?"bg-green-600":"bg-red-600"}`)},n(f.value.is_active=="1"?"Oui":"Non"),3)])])])):q("",!0),s("div",Ne,[s("div",Se,[Ce,s("div",Le,[a(d,{to:"/admin/shops/"+t.value.id+"/products"},{default:p(()=>[s("span",Pe,[a(c(P),{class:"h-5 w-5"})])]),_:1},8,["to"]),a(d,{to:"/admin/shops/"+t.value.id+"/products/new"},{default:p(()=>[s("span",Ve,[a(c(w),{class:"h-5 w-5"})])]),_:1},8,["to"])])]),s("div",Oe,[!x.value&&m.value.length==0?(o(),l("div",Be,[a(c(W),{class:"h-28 w-28"}),s("p",De,"Nous n'avons trouvé aucun produit pour "+n(t.value.name)+".",1),a(d,{to:"/admin/shops/"+t.value.id+"/products/create"},{default:p(()=>[s("span",Me,[qe,a(c(w),{class:"ml-2 h-5 w-5"})])]),_:1},8,["to"])])):x.value?(o(),l("div",Fe," Loading... ")):(o(),l("div",Te,[ze,(o(!0),l(N,null,S(m.value,e=>{var $,A;return o(),l("div",{key:e.prod_name},[s("div",{class:b(`w-full hover:bg-blue-100 py-2 space-x-1 flex ${m.value.indexOf(e)%2===0?"":"bg-gray-200"}`)},[s("span",Ee,n(m.value.indexOf(e)+1),1),s("span",We,n(e.prod_name),1),s("span",He,n((($=e==null?void 0:e.price)==null?void 0:$.split("_")[1])||((A=e==null?void 0:e.price_1)==null?void 0:A.split("_")[1]))+"$",1),s("span",Re,[a(d,{to:"/admin/products/"+e.prod_id+"/update"},{default:p(()=>[s("span",Ue,[a(c(V),{class:"w-4 h-4"})])]),_:2},1032,["to"]),a(d,{to:"/admin/products/"+e.prod_id},{default:p(()=>[s("span",Ge,[a(c(R),{class:"w-4 h-4"})])]),_:2},1032,["to"])])],2)])}),128))]))])])])])])}}};export{ct as default};
